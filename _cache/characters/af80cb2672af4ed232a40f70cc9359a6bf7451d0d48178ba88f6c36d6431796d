{"key":"data/default-user/characters/可点击的选择框.png-1750647807749.9192","value":"{\"name\":\"可点击的选择框\",\"description\":\"\",\"personality\":\"\",\"scenario\":\"\",\"first_mes\":\"# 使用说明\\r\\n- 更新/安装最新版前端助手：https://discord.com/channels/1134557553011998840/1296494001406345318\\r\\n- 将本角色卡除源代码外的局部正则移动到全局中\\r\\n- 导入本角色卡的世界书并全局启用\\r\\n- **如果要改世界书名字，请记得更改脚本前面的世界书名字**\\r\\n\\r\\n## 设置说明\\r\\n- 在世界书中有`设置-xxx`，可以更改选择框的执行逻辑\\r\\n\\r\\n## 自定义选项说明\\r\\n- 选项的\\\"总体字数\\\"在 `===选择框开始===` 的第一条 `rule` 里面调\\r\\n- 选项的\\\"个数\\\"在 `===选择框开始===` 的 `format` 里面调\\r\\n- \\\"自定义选项\\\"需要新建个条目按照现有选项的写法来写，`${要求$}` 会被 ai 输出成要求的内容，而直接写 `文本` 的话 ai 会原封不动的输出（比如 `选项-邪恶指引` 的 `title`）\\r\\n\\r\\n## 自定义样式说明\\r\\n- 自定义需要新建个条目按照现有样式的写法来写，具体能怎么定义可以用 f12 和 ai？\\r\\n\\r\\n# 文生图兼容性\\r\\n- 目前快速加载版本并不兼容文生图，可以换为使用正则中的兼容版本，当然会比较慢、丑而且只会在原地渲染，不会始终渲染在消息楼层末尾\\r\\n\\r\\n```\\r\\n<Checkbox>\\r\\n拥抱安慰:青空黎张开双臂将艾莉卡和伊薇特一起拥入怀中，轻声安慰两人，许诺会帮助她们解决艾莉卡的药物依赖问题\\r\\n思考计划:青空黎思考片刻后询问莫妮卡详细的研究计划和时间线，想知道需要多久才能开发出稳定的蛋白质注射剂\\r\\n邪恶指引:青空黎盯着伊薇特的淡蓝色血液样本，突然起身抓过试管，扭开艾莉卡的下巴强行灌入她口中，声称这是最直接的验证方法，同时手探入她裙底揉捏臀部防止她挣扎\\r\\n跳过场景:艾莉卡提供更多血液样本后，一行人讨论完实验方案。已是傍晚，青空黎护送艾莉卡和伊薇特回到她们的房间休息\\r\\n</Checkbox>\\r\\n```\\r\\n\\r\\n# 生效验证（如果生效，则这段文本上方不会有一个代码块，下方有一个可以点击的选择框）\",\"mes_example\":\"\",\"creatorcomment\":\"\",\"avatar\":\"可点击的选择框.png\",\"chat\":\"可点击的选择框 - 2025-03-01@15h24m58s\",\"talkativeness\":\"0.5\",\"fav\":false,\"tags\":[],\"spec\":\"chara_card_v3\",\"spec_version\":\"3.0\",\"data\":{\"name\":\"可点击的选择框\",\"description\":\"\",\"personality\":\"\",\"scenario\":\"\",\"first_mes\":\"# 使用说明\\r\\n- 更新/安装最新版前端助手：https://discord.com/channels/1134557553011998840/1296494001406345318\\r\\n- 将本角色卡除源代码外的局部正则移动到全局中\\r\\n- 导入本角色卡的世界书并全局启用\\r\\n- **如果要改世界书名字，请记得更改脚本前面的世界书名字**\\r\\n\\r\\n## 设置说明\\r\\n- 在世界书中有`设置-xxx`，可以更改选择框的执行逻辑\\r\\n\\r\\n## 自定义选项说明\\r\\n- 选项的\\\"总体字数\\\"在 `===选择框开始===` 的第一条 `rule` 里面调\\r\\n- 选项的\\\"个数\\\"在 `===选择框开始===` 的 `format` 里面调\\r\\n- \\\"自定义选项\\\"需要新建个条目按照现有选项的写法来写，`${要求$}` 会被 ai 输出成要求的内容，而直接写 `文本` 的话 ai 会原封不动的输出（比如 `选项-邪恶指引` 的 `title`）\\r\\n\\r\\n## 自定义样式说明\\r\\n- 自定义需要新建个条目按照现有样式的写法来写，具体能怎么定义可以用 f12 和 ai？\\r\\n\\r\\n# 文生图兼容性\\r\\n- 目前快速加载版本并不兼容文生图，可以换为使用正则中的兼容版本，当然会比较慢、丑而且只会在原地渲染，不会始终渲染在消息楼层末尾\\r\\n\\r\\n```\\r\\n<Checkbox>\\r\\n拥抱安慰:青空黎张开双臂将艾莉卡和伊薇特一起拥入怀中，轻声安慰两人，许诺会帮助她们解决艾莉卡的药物依赖问题\\r\\n思考计划:青空黎思考片刻后询问莫妮卡详细的研究计划和时间线，想知道需要多久才能开发出稳定的蛋白质注射剂\\r\\n邪恶指引:青空黎盯着伊薇特的淡蓝色血液样本，突然起身抓过试管，扭开艾莉卡的下巴强行灌入她口中，声称这是最直接的验证方法，同时手探入她裙底揉捏臀部防止她挣扎\\r\\n跳过场景:艾莉卡提供更多血液样本后，一行人讨论完实验方案。已是傍晚，青空黎护送艾莉卡和伊薇特回到她们的房间休息\\r\\n</Checkbox>\\r\\n```\\r\\n\\r\\n# 生效验证（如果生效，则这段文本上方不会有一个代码块，下方有一个可以点击的选择框）\",\"mes_example\":\"\",\"creator_notes\":\"\",\"system_prompt\":\"\",\"post_history_instructions\":\"\",\"tags\":[],\"creator\":\"\",\"character_version\":\"\",\"alternate_greetings\":[],\"extensions\":{\"talkativeness\":\"0.5\",\"fav\":false,\"world\":\"【选择框】\",\"depth_prompt\":{\"prompt\":\"\",\"depth\":4,\"role\":\"system\"},\"regex_scripts\":[{\"id\":\"ca8edfcc-e684-4485-af19-4fa1de4e813d\",\"scriptName\":\"选择框（较慢较丑但兼容文生图）\",\"findRegex\":\"/<Checkbox>(.+?)<\\\\/Checkbox>/gs\",\"replaceString\":\"<html>\\n\\n<body>\\n  <script id=\\\"checkbox_text\\\" type=\\\"text/plain\\\">$1</script>\\n  <script>\\n    \\\"use strict\\\";\\n    const lorebook_name = '【选择框】';\\n    const checkbox_tag = '<Checkbox>';\\n    const checkbox_regex = /<Checkbox>(.+?)<\\\\/Checkbox>/s;\\n    //----------------------------------------------------------------------------------------------------------------------\\n    var option;\\n    (function (option_1) {\\n      const default_option = {\\n        should_send_directly: true,\\n      };\\n      async function parse_option() {\\n        const transformers = {\\n          '开启则直接发送，关闭则填在输入': (value) => ({ should_send_directly: value }),\\n        };\\n        return await getLorebookEntries(lorebook_name, { filter: { comment: '设置-' } })\\n          .then(entries => entries.map(entry => ({ option: entry.comment.replace('设置-', ''), value: entry.enabled })))\\n          .then(entries => entries.reduce((result, { option, value }) => ({\\n            ...result,\\n            // @ts-ignore\\n            ...transformers[option]?.(value),\\n          }), default_option));\\n      }\\n      async function update() {\\n        const old_option = option_1.option;\\n        option_1.option = await parse_option();\\n        return !_.isEqual(option_1.option, old_option);\\n      }\\n      option_1.update = update;\\n    })(option || (option = {}));\\n    //----------------------------------------------------------------------------------------------------------------------\\n    var render;\\n    (function (render) {\\n      async function divclick($element) {\\n        if ($element.parents('.last_mes').length > 0) {\\n          const content = $element.find('.roleplay_checkbox_content').text().trim();\\n          triggerSlash(option.option.should_send_directly ? `/send ${content} || /trigger` : `/setinput ${content}`);\\n        }\\n      }\\n      let style;\\n      async function extract_style() {\\n        const entries = await getLorebookEntries(lorebook_name, { filter: { comment: '样式-' } }).then(entries => entries.filter(entry => entry.enabled));\\n        if (entries.length === 0) {\\n          return default_style;\\n        }\\n        return entries[0].content;\\n      }\\n      async function update() {\\n        const old_style = style;\\n        style = await extract_style();\\n        return !_.isEqual(style, old_style);\\n      }\\n      render.update = update;\\n      function extract_checkbox_element(text) {\\n        const $div = $('<div class=\\\"roleplay_checkbox\\\">');\\n        $div.append(style);\\n        $div.append($('<div class=\\\"roleplay_checkbox_back\\\">').append([...text.matchAll(/(.+?)[:：]\\\\s*(.+)/gm)]\\n          .map(match => ({ title: match[1], content: match[2] }))\\n          .map(({ title, content }) => $('<div class=\\\"roleplay_checkbox_item\\\" tabindex=\\\"1\\\">')\\n            .on('click', function () {\\n              divclick($(this));\\n            })\\n            .append(`<span class=\\\"roleplay_checkbox_title\\\"><strong>${title}</strong></span>`)\\n            .append('<hr class=\\\"roleplay_checkbox_hr\\\">')\\n            .append(`<span class=\\\"roleplay_checkbox_content\\\">${content}</span>`))));\\n        return $div;\\n      }\\n      render.extract_checkbox_element = extract_checkbox_element;\\n    })(render || (render = {}));\\n    //----------------------------------------------------------------------------------------------------------------------\\n    function render_checkbox_element() {\\n      return render.extract_checkbox_element($('#checkbox_text').text());\\n    }\\n    $(async () => {\\n      await option.update();\\n      await render.update();\\n      const $body = $('body');\\n      const toggle_class = async () => {\\n        if (getCurrentMessageId() === (await getLastMessageId())) {\\n          $body.addClass('last_mes');\\n        }\\n        else {\\n          $body.removeClass('last_mes');\\n        }\\n      };\\n      await toggle_class();\\n      eventOn(tavern_events.MESSAGE_SENT, toggle_class);\\n      eventOn(tavern_events.WORLDINFO_UPDATED, async (lorebook) => {\\n        if (lorebook !== lorebook_name) {\\n          return;\\n        }\\n        if (!(await option.update()) && !(await render.update())) {\\n          return;\\n        }\\n        $body.find('.roleplay_checkbox').replaceWith(render_checkbox_element());\\n      });\\n      $body.append(render_checkbox_element());\\n    });\\n    const default_style = `\\n<style>\\n  .roleplay_checkbox_hr {\\n    display: block;\\n    margin-block-start: 0.5em;\\n    margin-block-end: 0.5em;\\n    margin-inline-start: auto;\\n    margin-inline-end: auto;\\n    unicode-bidi: isolate;\\n    overflow: hidden;\\n    border-style: inset;\\n    border-width: 1px;\\n    font-weight: 600;\\n    color: #382b22;\\n    text-transform: uppercase;\\n    opacity: 1;\\n  }\\n\\n  .roleplay_checkbox_back {\\n    background-color: pink;\\n    padding: 10px;\\n    border-radius: 12px;\\n    display: flex;\\n    flex-direction: column;\\n    gap: 25px;\\n    padding-bottom: 30px;\\n    box-shadow: 2px 2px 2px rgba(0, 0, 0, 0.5);\\n    margin-right: 5px;\\n    border: 1px solid #b18597;\\n    font-size: 15px;\\n  }\\n\\n  .roleplay_checkbox_content {\\n    margin-left: 2rem;\\n    font-size: 14px;\\n    line-height: 1.4;\\n    letter-spacing: 0.7px;\\n  }\\n\\n  .roleplay_checkbox_item {\\n    font-weight: bold;\\n    color: #382b22;\\n    text-transform: uppercase;\\n    padding: 1em 1em 0.5em 1em;\\n    background: #fff0f0;\\n    border: 2px solid #b18597;\\n    border-radius: 0.75em;\\n    -webkit-transform-style: preserve-3d;\\n    transform-style: preserve-3d;\\n    -webkit-transition: background 150ms cubic-bezier(0, 0, 0.58, 1),\\n      -webkit-transform 150ms cubic-bezier(0, 0, 0.58, 1);\\n    transition: transform 150ms cubic-bezier(0, 0, 0.58, 1), background 150ms cubic-bezier(0, 0, 0.58, 1),\\n      -webkit-transform 150ms cubic-bezier(0, 0, 0.58, 1);\\n    display: inline-block;\\n    cursor: default;\\n    outline: none;\\n    border: 0;\\n    vertical-align: middle;\\n    text-decoration: none;\\n    font-family: inherit;\\n    font-size: 15px;\\n    -webkit-tap-highlight-color: transparent;\\n  }\\n\\n  .last_mes .roleplay_checkbox_item {\\n    cursor: pointer;\\n  }\\n\\n  .roleplay_checkbox_item::before {\\n    position: absolute;\\n    content: '';\\n    width: 100%;\\n    height: 100%;\\n    top: 0;\\n    left: 0;\\n    right: 0;\\n    bottom: 0;\\n    background: #f9c4d2;\\n    border-radius: inherit;\\n    -webkit-box-shadow: 0 0 0 2px #b18597, 0 0.425em 0 0 #ffe3e2;\\n    box-shadow: 0 0 0 2px #b18597, 0 0.425em 0 0 #ffe3e2;\\n    -webkit-transform: translate3d(0, 0.45em, -1em);\\n    transform: translate3d(0, 0.45em, -1em);\\n    transition: transform 150ms cubic-bezier(0, 0, 0.58, 1), box-shadow 150ms cubic-bezier(0, 0, 0.58, 1),\\n      -webkit-transform 150ms cubic-bezier(0, 0, 0.58, 1), -webkit-box-shadow 150ms cubic-bezier(0, 0, 0.58, 1);\\n  }\\n\\n  .last_mes .roleplay_checkbox_item:hover {\\n    background: #ffe9e9;\\n    -webkit-transform: translate(0, 0.15em);\\n    transform: translate(0, 0.15em);\\n  }\\n\\n  .last_mes .roleplay_checkbox_item:hover::before {\\n    -webkit-box-shadow: 0 0 0 2px #b18597, 0 0.5em 0 0 #ffe3e2;\\n    box-shadow: 0 0 0 2px #b18597, 0 0.5em 0 0 #ffe3e2;\\n    -webkit-transform: translate3d(0, 0.3em, -1em);\\n    transform: translate3d(0, 0.3em, -1em);\\n  }\\n\\n  .last_mes .roleplay_checkbox_item:active {\\n    background: #ffe9e9;\\n    -webkit-transform: translate(0em, 0.45em);\\n    transform: translate(0em, 0.45em);\\n  }\\n\\n  .last_mes .roleplay_checkbox_item:active::before {\\n    -webkit-box-shadow: 0 0 0 2px #b18597, 0 0 #ffe3e2;\\n    box-shadow: 0 0 0 2px #b18597, 0 0 #ffe3e2;\\n    -webkit-transform: translate3d(0, 0, -1em);\\n    transform: translate3d(0, 0, -1em);\\n  }\\n\\n  .roleplay_checkbox_title {\\n    font-weight: bolder;\\n    font-size: 13px;\\n    line-height: 1.4;\\n    letter-spacing: 0.7px;\\n  }\\n</style>\\n`;\\n    //# sourceMappingURL=test.js.map\\n  </script>\\n</body>\\n\\n</html>\",\"trimStrings\":[],\"placement\":[2],\"disabled\":true,\"markdownOnly\":true,\"promptOnly\":false,\"runOnEdit\":false,\"substituteRegex\":0,\"minDepth\":null,\"maxDepth\":null},{\"id\":\"29078dcc-1e27-40fc-91b4-005215025053\",\"scriptName\":\"（源代码）脚本-选择框\",\"findRegex\":\"\",\"replaceString\":\"const lorebook_name = '【选择框】' as const;\\nconst checkbox_tag = '<Checkbox>' as const;\\nconst checkbox_regex = /<Checkbox>(.+?)<\\\\/Checkbox>/s;\\n\\n//----------------------------------------------------------------------------------------------------------------------\\nnamespace option {\\n  const default_option = {\\n    should_send_directly: true,\\n  };\\n  type Option = typeof default_option;\\n\\n  export let option: Option;\\n\\n  async function parse_option(): Promise<Option> {\\n    const transformers = {\\n      '开启则直接发送，关闭则填在输入': (value: Option['should_send_directly']) => ({ should_send_directly: value }),\\n    };\\n    return await getLorebookEntries(lorebook_name, { filter: { comment: '设置-' } })\\n      .then(entries => entries.map(entry => ({ option: entry.comment.replace('设置-', ''), value: entry.enabled })))\\n      .then(entries =>\\n        entries.reduce(\\n          (result, { option, value }) => ({\\n            ...result,\\n            // @ts-ignore\\n            ...transformers[option]?.(value),\\n          }),\\n          default_option,\\n        ),\\n      );\\n  }\\n\\n  export async function update(): Promise<boolean> {\\n    const old_option = option;\\n    option = await parse_option();\\n    return !_.isEqual(option, old_option);\\n  }\\n}\\n\\n//----------------------------------------------------------------------------------------------------------------------\\nnamespace render {\\n  async function divclick($element: JQuery<HTMLDivElement>) {\\n    if ($element.parents('.last_mes').length > 0) {\\n      const content = $element.find('.roleplay_checkbox_content').text().trim();\\n      triggerSlash(option.option.should_send_directly ? `/send ${content} || /trigger` : `/setinput ${content}`);\\n    }\\n  }\\n\\n  let style: string;\\n\\n  async function extract_style(): Promise<string> {\\n    const entries = await getLorebookEntries(lorebook_name, { filter: { comment: '样式-' } }).then(entries =>\\n      entries.filter(entry => entry.enabled),\\n    );\\n    if (entries.length === 0) {\\n      return default_style;\\n    }\\n    return entries[0].content;\\n  }\\n\\n  export async function update(): Promise<boolean> {\\n    const old_style = style;\\n    style = await extract_style();\\n    return !_.isEqual(style, old_style);\\n  }\\n\\n  export function extract_checkbox_element(text: string): JQuery<HTMLDivElement> {\\n    const $div = $('<div class=\\\"roleplay_checkbox\\\">') as JQuery<HTMLDivElement>;\\n    $div.append(style);\\n    $div.append(\\n      ($('<div class=\\\"roleplay_checkbox_back\\\">') as JQuery<HTMLDivElement>).append(\\n        [...text.matchAll(/(.+?)[:：]\\\\s*(.+)/gm)]\\n          .map(match => ({ title: match[1], content: match[2] }))\\n          .map(({ title, content }) =>\\n            $('<div class=\\\"roleplay_checkbox_item\\\" tabindex=\\\"1\\\">')\\n              .on('click', function (this: HTMLDivElement) {\\n                divclick($(this));\\n              })\\n              .append(`<span class=\\\"roleplay_checkbox_title\\\"><strong>${title}</strong></span>`)\\n              .append('<hr class=\\\"roleplay_checkbox_hr\\\">')\\n              .append(`<span class=\\\"roleplay_checkbox_content\\\">${content}</span>`),\\n          ),\\n      ),\\n    );\\n    return $div;\\n  }\\n}\\n\\n//----------------------------------------------------------------------------------------------------------------------\\nasync function renderOneMessage(message_id: number) {\\n  const message: string = (await getChatMessages(message_id))[0].message;\\n  const match = message.match(checkbox_regex);\\n  if (!match) {\\n    return;\\n  }\\n  const $checkbox_element = render.extract_checkbox_element(match[1]);\\n\\n  const $mes_text = retrieveDisplayedMessage(message_id);\\n  const to_render = $mes_text.find(`.roleplay_checkbox, pre:contains(\\\"${checkbox_tag}\\\")`);\\n  if (to_render.length > 0) {\\n    to_render.remove();\\n    $mes_text.append($checkbox_element);\\n  }\\n}\\n\\nasync function renderAllMessage() {\\n  $('#chat', window.parent.document)\\n    .children(\\\".mes[is_user='false'][is_system='false']\\\")\\n    .each((_index, node) => {\\n      renderOneMessage(Number(node.getAttribute('mesid')));\\n    });\\n}\\n\\nnamespace detail {\\n  export function errorCatched<T extends any[], U>(fn: (...args: T) => U): (...args: T) => U {\\n    const onError = (error: Error) => {\\n      triggerSlash(\\n        `/echo severity=error (${getIframeName()})${error.stack ? error.stack : error.name + ': ' + error.message}`,\\n      );\\n      throw error;\\n    };\\n    return (...args: T): U => {\\n      try {\\n        const result = fn(...args);\\n        if (result instanceof Promise) {\\n          return result.catch(error => {\\n            onError(error);\\n          }) as U;\\n        }\\n        return result;\\n      } catch (error) {\\n        return onError(error as Error);\\n      }\\n    };\\n  }\\n}\\n\\n$(async () => {\\n  await detail.errorCatched(option.update)();\\n  await detail.errorCatched(render.update)();\\n  await detail.errorCatched(renderAllMessage)();\\n  eventOn(tavern_events.CHARACTER_MESSAGE_RENDERED, detail.errorCatched(renderOneMessage));\\n  eventOn(tavern_events.MESSAGE_UPDATED, detail.errorCatched(renderOneMessage));\\n  eventOn(tavern_events.MESSAGE_SWIPED, detail.errorCatched(renderOneMessage));\\n  eventOn(tavern_events.MESSAGE_DELETED, detail.errorCatched(renderAllMessage));\\n  eventOn(\\n    tavern_events.WORLDINFO_UPDATED,\\n    detail.errorCatched(async lorebook => {\\n      if (lorebook !== lorebook_name) {\\n        return;\\n      }\\n      if (!(await option.update()) && !(await render.update())) {\\n        return;\\n      }\\n      await renderAllMessage();\\n    }),\\n  );\\n});\\n\\nconst default_style = `\\n<style>\\n  .roleplay_checkbox_hr {\\n    display: block;\\n    margin-block-start: 0.5em;\\n    margin-block-end: 0.5em;\\n    margin-inline-start: auto;\\n    margin-inline-end: auto;\\n    unicode-bidi: isolate;\\n    overflow: hidden;\\n    border-style: inset;\\n    border-width: 1px;\\n    font-weight: 600;\\n    color: #382b22;\\n    text-transform: uppercase;\\n    opacity: 1;\\n  }\\n\\n  .roleplay_checkbox_back {\\n    background-color: pink;\\n    padding: 10px;\\n    border-radius: 12px;\\n    display: flex;\\n    flex-direction: column;\\n    gap: 25px;\\n    padding-bottom: 30px;\\n    box-shadow: 2px 2px 2px rgba(0, 0, 0, 0.5);\\n    margin-right: 5px;\\n    border: 1px solid #b18597;\\n    font-size: 15px;\\n  }\\n\\n  .roleplay_checkbox_content {\\n    margin-left: 2rem;\\n    font-size: 14px;\\n    line-height: 1.4;\\n    letter-spacing: 0.7px;\\n  }\\n\\n  .roleplay_checkbox_item {\\n    font-weight: bold;\\n    color: #382b22;\\n    text-transform: uppercase;\\n    padding: 1em 1em 0.5em 1em;\\n    background: #fff0f0;\\n    border: 2px solid #b18597;\\n    border-radius: 0.75em;\\n    -webkit-transform-style: preserve-3d;\\n    transform-style: preserve-3d;\\n    -webkit-transition: background 150ms cubic-bezier(0, 0, 0.58, 1),\\n      -webkit-transform 150ms cubic-bezier(0, 0, 0.58, 1);\\n    transition: transform 150ms cubic-bezier(0, 0, 0.58, 1), background 150ms cubic-bezier(0, 0, 0.58, 1),\\n      -webkit-transform 150ms cubic-bezier(0, 0, 0.58, 1);\\n    display: inline-block;\\n    cursor: default;\\n    outline: none;\\n    border: 0;\\n    vertical-align: middle;\\n    text-decoration: none;\\n    font-family: inherit;\\n    font-size: 15px;\\n    -webkit-tap-highlight-color: transparent;\\n  }\\n\\n  .last_mes .roleplay_checkbox_item {\\n    cursor: pointer;\\n  }\\n\\n  .roleplay_checkbox_item::before {\\n    position: absolute;\\n    content: '';\\n    width: 100%;\\n    height: 100%;\\n    top: 0;\\n    left: 0;\\n    right: 0;\\n    bottom: 0;\\n    background: #f9c4d2;\\n    border-radius: inherit;\\n    -webkit-box-shadow: 0 0 0 2px #b18597, 0 0.425em 0 0 #ffe3e2;\\n    box-shadow: 0 0 0 2px #b18597, 0 0.425em 0 0 #ffe3e2;\\n    -webkit-transform: translate3d(0, 0.45em, -1em);\\n    transform: translate3d(0, 0.45em, -1em);\\n    transition: transform 150ms cubic-bezier(0, 0, 0.58, 1), box-shadow 150ms cubic-bezier(0, 0, 0.58, 1),\\n      -webkit-transform 150ms cubic-bezier(0, 0, 0.58, 1), -webkit-box-shadow 150ms cubic-bezier(0, 0, 0.58, 1);\\n  }\\n\\n  .last_mes .roleplay_checkbox_item:hover {\\n    background: #ffe9e9;\\n    -webkit-transform: translate(0, 0.15em);\\n    transform: translate(0, 0.15em);\\n  }\\n\\n  .last_mes .roleplay_checkbox_item:hover::before {\\n    -webkit-box-shadow: 0 0 0 2px #b18597, 0 0.5em 0 0 #ffe3e2;\\n    box-shadow: 0 0 0 2px #b18597, 0 0.5em 0 0 #ffe3e2;\\n    -webkit-transform: translate3d(0, 0.3em, -1em);\\n    transform: translate3d(0, 0.3em, -1em);\\n  }\\n\\n  .last_mes .roleplay_checkbox_item:active {\\n    background: #ffe9e9;\\n    -webkit-transform: translate(0em, 0.45em);\\n    transform: translate(0em, 0.45em);\\n  }\\n\\n  .last_mes .roleplay_checkbox_item:active::before {\\n    -webkit-box-shadow: 0 0 0 2px #b18597, 0 0 #ffe3e2;\\n    box-shadow: 0 0 0 2px #b18597, 0 0 #ffe3e2;\\n    -webkit-transform: translate3d(0, 0, -1em);\\n    transform: translate3d(0, 0, -1em);\\n  }\\n\\n  .roleplay_checkbox_title {\\n    font-weight: bolder;\\n    font-size: 13px;\\n    line-height: 1.4;\\n    letter-spacing: 0.7px;\\n  }\\n</style>\\n`;\\n\",\"trimStrings\":[],\"placement\":[],\"disabled\":true,\"markdownOnly\":false,\"promptOnly\":false,\"runOnEdit\":false,\"substituteRegex\":0,\"minDepth\":null,\"maxDepth\":null},{\"id\":\"ccb8bf6e-aace-410a-a582-ce77cdb1e03d\",\"scriptName\":\"（源代码）选择框（较慢较丑但兼容文生图）\",\"findRegex\":\"\",\"replaceString\":\"const lorebook_name = '【选择框】' as const;\\nconst checkbox_tag = '<Checkbox>' as const;\\nconst checkbox_regex = /<Checkbox>(.+?)<\\\\/Checkbox>/s;\\n\\n//----------------------------------------------------------------------------------------------------------------------\\nnamespace option {\\n  const default_option = {\\n    should_send_directly: true,\\n  };\\n  type Option = typeof default_option;\\n\\n  export let option: Option;\\n\\n  async function parse_option(): Promise<Option> {\\n    const transformers = {\\n      '开启则直接发送，关闭则填在输入': (value: Option['should_send_directly']) => ({ should_send_directly: value }),\\n    };\\n    return await getLorebookEntries(lorebook_name, { filter: { comment: '设置-' } })\\n      .then(entries => entries.map(entry => ({ option: entry.comment.replace('设置-', ''), value: entry.enabled })))\\n      .then(entries =>\\n        entries.reduce(\\n          (result, { option, value }) => ({\\n            ...result,\\n            // @ts-ignore\\n            ...transformers[option]?.(value),\\n          }),\\n          default_option,\\n        ),\\n      );\\n  }\\n\\n  export async function update(): Promise<boolean> {\\n    const old_option = option;\\n    option = await parse_option();\\n    return !_.isEqual(option, old_option);\\n  }\\n}\\n\\n//----------------------------------------------------------------------------------------------------------------------\\nnamespace render {\\n  async function divclick($element: JQuery<HTMLDivElement>) {\\n    if ($element.parents('.last_mes').length > 0) {\\n      const content = $element.find('.roleplay_checkbox_content').text().trim();\\n      triggerSlash(option.option.should_send_directly ? `/send ${content} || /trigger` : `/setinput ${content}`);\\n    }\\n  }\\n\\n  let style: string;\\n\\n  async function extract_style(): Promise<string> {\\n    const entries = await getLorebookEntries(lorebook_name, { filter: { comment: '样式-' } }).then(entries =>\\n      entries.filter(entry => entry.enabled),\\n    );\\n    if (entries.length === 0) {\\n      return default_style;\\n    }\\n    return entries[0].content;\\n  }\\n\\n  export async function update(): Promise<boolean> {\\n    const old_style = style;\\n    style = await extract_style();\\n    return !_.isEqual(style, old_style);\\n  }\\n\\n  export function extract_checkbox_element(text: string): JQuery<HTMLDivElement> {\\n    const $div = $('<div class=\\\"roleplay_checkbox\\\">') as JQuery<HTMLDivElement>;\\n    $div.append(style);\\n    $div.append(\\n      ($('<div class=\\\"roleplay_checkbox_back\\\">') as JQuery<HTMLDivElement>).append(\\n        [...text.matchAll(/(.+?)[:：]\\\\s*(.+)/gm)]\\n          .map(match => ({ title: match[1], content: match[2] }))\\n          .map(({ title, content }) =>\\n            $('<div class=\\\"roleplay_checkbox_item\\\" tabindex=\\\"1\\\">')\\n              .on('click', function (this: HTMLDivElement) {\\n                divclick($(this));\\n              })\\n              .append(`<span class=\\\"roleplay_checkbox_title\\\"><strong>${title}</strong></span>`)\\n              .append('<hr class=\\\"roleplay_checkbox_hr\\\">')\\n              .append(`<span class=\\\"roleplay_checkbox_content\\\">${content}</span>`),\\n          ),\\n      ),\\n    );\\n    return $div;\\n  }\\n}\\n\\n//----------------------------------------------------------------------------------------------------------------------\\nfunction render_checkbox_element() {\\n  return render.extract_checkbox_element($('#checkbox_text').text());\\n}\\n\\n$(async () => {\\n  await option.update();\\n  await render.update();\\n\\n  const $body = $('body');\\n\\n  const toggle_class = async () => {\\n    if (getCurrentMessageId() === (await getLastMessageId())) {\\n      $body.addClass('last_mes');\\n    } else {\\n      $body.removeClass('last_mes');\\n    }\\n  };\\n  await toggle_class();\\n  eventOn(tavern_events.MESSAGE_SENT, toggle_class);\\n  eventOn(tavern_events.WORLDINFO_UPDATED, async lorebook => {\\n    if (lorebook !== lorebook_name) {\\n      return;\\n    }\\n    if (!(await option.update()) && !(await render.update())) {\\n      return;\\n    }\\n    $body.find('.roleplay_checkbox').replaceWith(render_checkbox_element());\\n  });\\n\\n  $body.append(render_checkbox_element());\\n});\\n\\nconst default_style = `\\n<style>\\n  .roleplay_checkbox_hr {\\n    display: block;\\n    margin-block-start: 0.5em;\\n    margin-block-end: 0.5em;\\n    margin-inline-start: auto;\\n    margin-inline-end: auto;\\n    unicode-bidi: isolate;\\n    overflow: hidden;\\n    border-style: inset;\\n    border-width: 1px;\\n    font-weight: 600;\\n    color: #382b22;\\n    text-transform: uppercase;\\n    opacity: 1;\\n  }\\n\\n  .roleplay_checkbox_back {\\n    background-color: pink;\\n    padding: 10px;\\n    border-radius: 12px;\\n    display: flex;\\n    flex-direction: column;\\n    gap: 25px;\\n    padding-bottom: 30px;\\n    box-shadow: 2px 2px 2px rgba(0, 0, 0, 0.5);\\n    margin-right: 5px;\\n    border: 1px solid #b18597;\\n    font-size: 15px;\\n  }\\n\\n  .roleplay_checkbox_content {\\n    margin-left: 2rem;\\n    font-size: 14px;\\n    line-height: 1.4;\\n    letter-spacing: 0.7px;\\n  }\\n\\n  .roleplay_checkbox_item {\\n    font-weight: bold;\\n    color: #382b22;\\n    text-transform: uppercase;\\n    padding: 1em 1em 0.5em 1em;\\n    background: #fff0f0;\\n    border: 2px solid #b18597;\\n    border-radius: 0.75em;\\n    -webkit-transform-style: preserve-3d;\\n    transform-style: preserve-3d;\\n    -webkit-transition: background 150ms cubic-bezier(0, 0, 0.58, 1),\\n      -webkit-transform 150ms cubic-bezier(0, 0, 0.58, 1);\\n    transition: transform 150ms cubic-bezier(0, 0, 0.58, 1), background 150ms cubic-bezier(0, 0, 0.58, 1),\\n      -webkit-transform 150ms cubic-bezier(0, 0, 0.58, 1);\\n    display: inline-block;\\n    cursor: default;\\n    outline: none;\\n    border: 0;\\n    vertical-align: middle;\\n    text-decoration: none;\\n    font-family: inherit;\\n    font-size: 15px;\\n    -webkit-tap-highlight-color: transparent;\\n  }\\n\\n  .last_mes .roleplay_checkbox_item {\\n    cursor: pointer;\\n  }\\n\\n  .roleplay_checkbox_item::before {\\n    position: absolute;\\n    content: '';\\n    width: 100%;\\n    height: 100%;\\n    top: 0;\\n    left: 0;\\n    right: 0;\\n    bottom: 0;\\n    background: #f9c4d2;\\n    border-radius: inherit;\\n    -webkit-box-shadow: 0 0 0 2px #b18597, 0 0.425em 0 0 #ffe3e2;\\n    box-shadow: 0 0 0 2px #b18597, 0 0.425em 0 0 #ffe3e2;\\n    -webkit-transform: translate3d(0, 0.45em, -1em);\\n    transform: translate3d(0, 0.45em, -1em);\\n    transition: transform 150ms cubic-bezier(0, 0, 0.58, 1), box-shadow 150ms cubic-bezier(0, 0, 0.58, 1),\\n      -webkit-transform 150ms cubic-bezier(0, 0, 0.58, 1), -webkit-box-shadow 150ms cubic-bezier(0, 0, 0.58, 1);\\n  }\\n\\n  .last_mes .roleplay_checkbox_item:hover {\\n    background: #ffe9e9;\\n    -webkit-transform: translate(0, 0.15em);\\n    transform: translate(0, 0.15em);\\n  }\\n\\n  .last_mes .roleplay_checkbox_item:hover::before {\\n    -webkit-box-shadow: 0 0 0 2px #b18597, 0 0.5em 0 0 #ffe3e2;\\n    box-shadow: 0 0 0 2px #b18597, 0 0.5em 0 0 #ffe3e2;\\n    -webkit-transform: translate3d(0, 0.3em, -1em);\\n    transform: translate3d(0, 0.3em, -1em);\\n  }\\n\\n  .last_mes .roleplay_checkbox_item:active {\\n    background: #ffe9e9;\\n    -webkit-transform: translate(0em, 0.45em);\\n    transform: translate(0em, 0.45em);\\n  }\\n\\n  .last_mes .roleplay_checkbox_item:active::before {\\n    -webkit-box-shadow: 0 0 0 2px #b18597, 0 0 #ffe3e2;\\n    box-shadow: 0 0 0 2px #b18597, 0 0 #ffe3e2;\\n    -webkit-transform: translate3d(0, 0, -1em);\\n    transform: translate3d(0, 0, -1em);\\n  }\\n\\n  .roleplay_checkbox_title {\\n    font-weight: bolder;\\n    font-size: 13px;\\n    line-height: 1.4;\\n    letter-spacing: 0.7px;\\n  }\\n</style>\\n` as const;\\n\",\"trimStrings\":[],\"placement\":[],\"disabled\":true,\"markdownOnly\":false,\"promptOnly\":false,\"runOnEdit\":false,\"substituteRegex\":0,\"minDepth\":null,\"maxDepth\":null}]},\"group_only_greetings\":[],\"character_book\":{\"entries\":[{\"id\":0,\"keys\":[],\"secondary_keys\":[],\"comment\":\"===选择框结束===\",\"content\":\"]\\n...\",\"constant\":true,\"selective\":true,\"insertion_order\":702,\"enabled\":true,\"position\":\"after_char\",\"use_regex\":true,\"extensions\":{\"position\":4,\"exclude_recursion\":true,\"display_index\":23,\"probability\":100,\"useProbability\":true,\"depth\":4,\"selectiveLogic\":0,\"group\":\"\",\"group_override\":false,\"group_weight\":100,\"prevent_recursion\":true,\"delay_until_recursion\":false,\"scan_depth\":null,\"match_whole_words\":null,\"use_group_scoring\":false,\"case_sensitive\":null,\"automation_id\":\"\",\"role\":0,\"vectorized\":false,\"sticky\":0,\"cooldown\":0,\"delay\":0}},{\"id\":1,\"keys\":[],\"secondary_keys\":[],\"comment\":\"选项-跳过场景\",\"content\":\"{\\n  type: '跳过场景',\\n  content: '${当前场景描写十分足够时，用概括性的语言来跳过当前动作的描写并展开下一场景进行新描写，剧情上保持连贯$}'\\n  rule: '必须给出一个跳过场景选项'\\n},\",\"constant\":true,\"selective\":true,\"insertion_order\":701,\"enabled\":true,\"position\":\"after_char\",\"use_regex\":true,\"extensions\":{\"position\":4,\"exclude_recursion\":true,\"display_index\":17,\"probability\":50,\"useProbability\":true,\"depth\":4,\"selectiveLogic\":0,\"group\":\"\",\"group_override\":false,\"group_weight\":100,\"prevent_recursion\":true,\"delay_until_recursion\":false,\"scan_depth\":null,\"match_whole_words\":null,\"use_group_scoring\":false,\"case_sensitive\":null,\"automation_id\":\"\",\"role\":0,\"vectorized\":false,\"sticky\":0,\"cooldown\":0,\"delay\":0}},{\"id\":2,\"keys\":[],\"secondary_keys\":[],\"comment\":\"===选择框开始===\",\"content\":\"---\\n选择框:\\n  rule:\\n    - You must output the checkbox wrapped in <Checkbox> tags into a code block at the bottom of each reply\\n    - You can only output 100 to 200 Chinese words in total for checkbox\\n    - Each option inside the checkbox must completely differ from others in titles and contents, leading to various creative plot directions\\n    - Options shouldn't include what <user> doesn't know\\n  format:\\n    basic: |-\\n      ```\\n      <Checkbox>\\n      ${按照content拟定标题，禁止与type相同$}:${content，必须以第三人称输出行为的主语$}\\n      ...$(generate {{random::4::5::6}} options based on option type below$)\\n      </Checkbox>\\n      ```\\n    option type: [\",\"constant\":true,\"selective\":true,\"insertion_order\":700,\"enabled\":true,\"position\":\"after_char\",\"use_regex\":true,\"extensions\":{\"position\":4,\"exclude_recursion\":true,\"display_index\":14,\"probability\":100,\"useProbability\":true,\"depth\":4,\"selectiveLogic\":0,\"group\":\"\",\"group_override\":false,\"group_weight\":100,\"prevent_recursion\":true,\"delay_until_recursion\":false,\"scan_depth\":null,\"match_whole_words\":null,\"use_group_scoring\":false,\"case_sensitive\":null,\"automation_id\":\"\",\"role\":0,\"vectorized\":false,\"sticky\":0,\"cooldown\":0,\"delay\":0}},{\"id\":3,\"keys\":[],\"secondary_keys\":[],\"comment\":\"选项-邪恶响应\",\"content\":\"{\\n  type: '邪恶响应',\\n  content: '${根据当前的邪恶指引，给出一个荒诞邪恶的剧情发展，尽可能荒谬幽默，比较变态，可以色情，但绝不会说角色和非<user>的异性发生性行为$}',\\n  rule: '必须给出至少一个邪恶响应选项',\\n},\",\"constant\":true,\"selective\":true,\"insertion_order\":701,\"enabled\":true,\"position\":\"after_char\",\"use_regex\":true,\"extensions\":{\"position\":4,\"exclude_recursion\":true,\"display_index\":16,\"probability\":100,\"useProbability\":true,\"depth\":4,\"selectiveLogic\":0,\"group\":\"\",\"group_override\":false,\"group_weight\":100,\"prevent_recursion\":true,\"delay_until_recursion\":false,\"scan_depth\":null,\"match_whole_words\":null,\"use_group_scoring\":false,\"case_sensitive\":null,\"automation_id\":\"\",\"role\":0,\"vectorized\":false,\"sticky\":0,\"cooldown\":0,\"delay\":0}},{\"id\":5,\"keys\":[],\"secondary_keys\":[],\"comment\":\"邪恶指引-与user对话版\",\"content\":\"{邪恶指引: {rule: Insert the EvilGuidance after your response as the following format, format: \\\"<EvilGuidance>\\\\n<small>\\\\n```yaml\\\\n😈邪恶指引: ${以旁白的角度，用调侃戏谑而亲密的语气给<user>提供不具有参考价值的建议，字数不超过150字。尽可能荒谬幽默，比较变态，可以色情，但绝不会说角色和非<user>的异性发生性行为。适当使用{{random::emoji::颜文字}}使话语显得更加活泼$}\\\\n```\\\\n</small>\\\\n</EvilGuidance>\\\"}}\\n\",\"constant\":true,\"selective\":true,\"insertion_order\":699,\"enabled\":true,\"position\":\"after_char\",\"use_regex\":true,\"extensions\":{\"position\":4,\"exclude_recursion\":true,\"display_index\":12,\"probability\":100,\"useProbability\":true,\"depth\":4,\"selectiveLogic\":0,\"group\":\"\",\"group_override\":false,\"group_weight\":100,\"prevent_recursion\":true,\"delay_until_recursion\":false,\"scan_depth\":null,\"match_whole_words\":null,\"use_group_scoring\":false,\"case_sensitive\":null,\"automation_id\":\"\",\"role\":0,\"vectorized\":false,\"sticky\":0,\"cooldown\":0,\"delay\":0}},{\"id\":6,\"keys\":[],\"secondary_keys\":[],\"comment\":\"选项-趣味选项\",\"content\":\"{\\n  type: '趣味选项',\\n  content: '${分析这个故事的主题，考虑该主题受众会对什么内容感兴趣，并以此给出一个有趣的剧情发展$}',\\n},\",\"constant\":true,\"selective\":true,\"insertion_order\":701,\"enabled\":true,\"position\":\"after_char\",\"use_regex\":true,\"extensions\":{\"position\":4,\"exclude_recursion\":true,\"display_index\":15,\"probability\":100,\"useProbability\":true,\"depth\":4,\"selectiveLogic\":0,\"group\":\"\",\"group_override\":false,\"group_weight\":100,\"prevent_recursion\":true,\"delay_until_recursion\":false,\"scan_depth\":null,\"match_whole_words\":null,\"use_group_scoring\":false,\"case_sensitive\":null,\"automation_id\":\"\",\"role\":0,\"vectorized\":false,\"sticky\":0,\"cooldown\":0,\"delay\":0}},{\"id\":7,\"keys\":[],\"secondary_keys\":[],\"comment\":\"输出格式强调\",\"content\":\"{选择框格式强调: {rule: 'The following must be inserted to the end of each reply, and cannot be omitted', format: \\\"<EvilGuidance>\\\\n<small>\\\\n```yaml\\\\n...\\\\n```\\\\n</small>\\\\n</EvilGuidance>\\\\n```\\\\n<Checkbox>\\\\n...\\\\n</Checkbox>\\\\n```\\\"}}\\n\",\"constant\":true,\"selective\":true,\"insertion_order\":99,\"enabled\":true,\"position\":\"after_char\",\"use_regex\":true,\"extensions\":{\"position\":4,\"exclude_recursion\":true,\"display_index\":10,\"probability\":100,\"useProbability\":true,\"depth\":0,\"selectiveLogic\":0,\"group\":\"\",\"group_override\":false,\"group_weight\":100,\"prevent_recursion\":true,\"delay_until_recursion\":false,\"scan_depth\":null,\"match_whole_words\":null,\"use_group_scoring\":false,\"case_sensitive\":null,\"automation_id\":\"\",\"role\":0,\"vectorized\":false,\"sticky\":0,\"cooldown\":0,\"delay\":0}},{\"id\":8,\"keys\":[],\"secondary_keys\":[],\"comment\":\"语法规则\",\"content\":\"{语法规则: {rule: you MUST obey following grammars when output according to a `format` mapping, grammar: ['you should replace ${description$} with output described in description', you should follow additional requirements in $(requirement$) but never ever output it, you may output additional content according to former rules and content when encountering ..., you should output others directly without any modification]}}\\n\",\"constant\":true,\"selective\":true,\"insertion_order\":100,\"enabled\":true,\"position\":\"after_char\",\"use_regex\":true,\"extensions\":{\"position\":4,\"exclude_recursion\":true,\"display_index\":11,\"probability\":100,\"useProbability\":true,\"depth\":0,\"selectiveLogic\":0,\"group\":\"\",\"group_override\":false,\"group_weight\":100,\"prevent_recursion\":true,\"delay_until_recursion\":false,\"scan_depth\":null,\"match_whole_words\":null,\"use_group_scoring\":false,\"case_sensitive\":null,\"automation_id\":\"\",\"role\":0,\"vectorized\":false,\"sticky\":0,\"cooldown\":0,\"delay\":0}},{\"id\":9,\"keys\":[],\"secondary_keys\":[],\"comment\":\"===样式开始===\",\"content\":\"\",\"constant\":false,\"selective\":true,\"insertion_order\":100,\"enabled\":true,\"position\":\"before_char\",\"use_regex\":true,\"extensions\":{\"position\":0,\"exclude_recursion\":false,\"display_index\":27,\"probability\":100,\"useProbability\":true,\"depth\":4,\"selectiveLogic\":0,\"group\":\"\",\"group_override\":false,\"group_weight\":100,\"prevent_recursion\":false,\"delay_until_recursion\":false,\"scan_depth\":null,\"match_whole_words\":null,\"use_group_scoring\":false,\"case_sensitive\":null,\"automation_id\":\"\",\"role\":0,\"vectorized\":false,\"sticky\":0,\"cooldown\":0,\"delay\":0}},{\"id\":10,\"keys\":[],\"secondary_keys\":[],\"comment\":\"样式-柏柏默认\",\"content\":\"<style>\\n  .roleplay_checkbox_hr {\\n    display: block;\\n    margin-block-start: 0.5em;\\n    margin-block-end: 0.5em;\\n    margin-inline-start: auto;\\n    margin-inline-end: auto;\\n    unicode-bidi: isolate;\\n    overflow: hidden;\\n    border-style: inset;\\n    border-width: 1px;\\n    font-weight: 600;\\n    color: #382b22;\\n    text-transform: uppercase;\\n    opacity: 1;\\n  }\\n\\n  .roleplay_checkbox_back {\\n    background-color: pink;\\n    padding: 10px;\\n    border-radius: 12px;\\n    display: flex;\\n    flex-direction: column;\\n    gap: 25px;\\n    padding-bottom: 30px;\\n    box-shadow: 2px 2px 2px rgba(0, 0, 0, 0.5);\\n    margin-right: 5px;\\n    border: 1px solid #b18597;\\n    font-size: 15px;\\n  }\\n\\n  .roleplay_checkbox_content {\\n    margin-left: 2rem;\\n    font-size: 14px;\\n    line-height: 1.4;\\n    letter-spacing: 0.7px;\\n  }\\n\\n  .roleplay_checkbox_item {\\n    font-weight: bold;\\n    color: #382b22;\\n    text-transform: uppercase;\\n    padding: 1em 1em 0.5em 1em;\\n    background: #fff0f0;\\n    border: 2px solid #b18597;\\n    border-radius: 0.75em;\\n    -webkit-transform-style: preserve-3d;\\n    transform-style: preserve-3d;\\n    -webkit-transition: background 150ms cubic-bezier(0, 0, 0.58, 1),\\n      -webkit-transform 150ms cubic-bezier(0, 0, 0.58, 1);\\n    transition: transform 150ms cubic-bezier(0, 0, 0.58, 1), background 150ms cubic-bezier(0, 0, 0.58, 1),\\n      -webkit-transform 150ms cubic-bezier(0, 0, 0.58, 1);\\n    display: inline-block;\\n    cursor: default;\\n    outline: none;\\n    border: 0;\\n    vertical-align: middle;\\n    text-decoration: none;\\n    font-family: inherit;\\n    font-size: 15px;\\n    -webkit-tap-highlight-color: transparent;\\n  }\\n\\n  .last_mes .roleplay_checkbox_item {\\n    cursor: pointer;\\n  }\\n\\n  .roleplay_checkbox_item::before {\\n    position: absolute;\\n    content: '';\\n    width: 100%;\\n    height: 100%;\\n    top: 0;\\n    left: 0;\\n    right: 0;\\n    bottom: 0;\\n    background: #f9c4d2;\\n    border-radius: inherit;\\n    -webkit-box-shadow: 0 0 0 2px #b18597, 0 0.425em 0 0 #ffe3e2;\\n    box-shadow: 0 0 0 2px #b18597, 0 0.425em 0 0 #ffe3e2;\\n    -webkit-transform: translate3d(0, 0.45em, -1em);\\n    transform: translate3d(0, 0.45em, -1em);\\n    transition: transform 150ms cubic-bezier(0, 0, 0.58, 1), box-shadow 150ms cubic-bezier(0, 0, 0.58, 1),\\n      -webkit-transform 150ms cubic-bezier(0, 0, 0.58, 1), -webkit-box-shadow 150ms cubic-bezier(0, 0, 0.58, 1);\\n  }\\n\\n  .last_mes .roleplay_checkbox_item:hover {\\n    background: #ffe9e9;\\n    -webkit-transform: translate(0, 0.15em);\\n    transform: translate(0, 0.15em);\\n  }\\n\\n  .last_mes .roleplay_checkbox_item:hover::before {\\n    -webkit-box-shadow: 0 0 0 2px #b18597, 0 0.5em 0 0 #ffe3e2;\\n    box-shadow: 0 0 0 2px #b18597, 0 0.5em 0 0 #ffe3e2;\\n    -webkit-transform: translate3d(0, 0.3em, -1em);\\n    transform: translate3d(0, 0.3em, -1em);\\n  }\\n\\n  .last_mes .roleplay_checkbox_item:active {\\n    background: #ffe9e9;\\n    -webkit-transform: translate(0em, 0.45em);\\n    transform: translate(0em, 0.45em);\\n  }\\n\\n  .last_mes .roleplay_checkbox_item:active::before {\\n    -webkit-box-shadow: 0 0 0 2px #b18597, 0 0 #ffe3e2;\\n    box-shadow: 0 0 0 2px #b18597, 0 0 #ffe3e2;\\n    -webkit-transform: translate3d(0, 0, -1em);\\n    transform: translate3d(0, 0, -1em);\\n  }\\n\\n  .roleplay_checkbox_title {\\n    font-weight: bolder;\\n    font-size: 13px;\\n    line-height: 1.4;\\n    letter-spacing: 0.7px;\\n  }\\n</style>\",\"constant\":false,\"selective\":true,\"insertion_order\":100,\"enabled\":false,\"position\":\"before_char\",\"use_regex\":true,\"extensions\":{\"position\":0,\"exclude_recursion\":false,\"display_index\":28,\"probability\":100,\"useProbability\":true,\"depth\":4,\"selectiveLogic\":0,\"group\":\"\",\"group_override\":false,\"group_weight\":100,\"prevent_recursion\":false,\"delay_until_recursion\":false,\"scan_depth\":null,\"match_whole_words\":null,\"use_group_scoring\":false,\"case_sensitive\":null,\"automation_id\":\"\",\"role\":0,\"vectorized\":false,\"sticky\":0,\"cooldown\":0,\"delay\":0}},{\"id\":11,\"keys\":[],\"secondary_keys\":[],\"comment\":\"样式-络络扁平化亮色\",\"content\":\"<style>\\n  .roleplay_checkbox_hr {\\n    height: 1px;\\n    background: linear-gradient(to right, rgba(0,0,0,0), rgba(220,220,220,0.7), rgba(0,0,0,0));\\n    border: none;\\n    margin: 10px 0;\\n  }\\n\\n  .roleplay_checkbox_back {\\n    background: linear-gradient(150deg, #f7f7f7, #f0f0f0);\\n    border-radius: 16px;\\n    box-shadow: 0 12px 30px rgba(0, 0, 0, 0.05);\\n    padding: 24px;\\n    display: grid;\\n    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));\\n    gap: 16px;\\n    border: 1px solid rgba(0, 0, 0, 0.03);\\n    max-width: 1200px;\\n    margin: 20px auto;\\n  }\\n\\n  .roleplay_checkbox_content {\\n    font-size: 15px;\\n    line-height: 1.5;\\n    color: #666666;\\n    font-weight: normal;\\n    transition: color 0.3s ease;\\n  }\\n\\n  .roleplay_checkbox_item {\\n    position: relative;\\n    background: #fcfcfc;\\n    border-radius: 12px;\\n    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.04);\\n    padding: 20px 24px;\\n    cursor: default;\\n    border: 1px solid rgba(0, 0, 0, 0.05);\\n    transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);\\n    overflow: hidden;\\n    display: flex;\\n    flex-direction: column;\\n    height: 100%;\\n    z-index: 1;\\n  }\\n\\n  .last_mes .roleplay_checkbox_item {\\n    cursor: pointer;\\n  }\\n\\n  .roleplay_checkbox_item::after {\\n    content: '';\\n    position: absolute;\\n    top: 0;\\n    left: 0;\\n    width: 100%;\\n    height: 100%;\\n    background: linear-gradient(135deg, transparent 0%, transparent 50%, rgba(255, 182, 193, 0.1) 150%);\\n    opacity: 0;\\n    transition: opacity 0.4s ease;\\n    z-index: -1;\\n  }\\n\\n  .last_mes .roleplay_checkbox_item:hover {\\n    transform: translateY(-4px);\\n    box-shadow: 0 10px 20px rgba(0, 0, 0, 0.07);\\n    background: #ffffff;\\n    border-color: rgba(255, 105, 180, 0.15);\\n  }\\n\\n  .last_mes .roleplay_checkbox_item:hover::after {\\n    opacity: 1;\\n  }\\n\\n  .last_mes .roleplay_checkbox_item:hover .roleplay_checkbox_content {\\n    color: #444444;\\n  }\\n\\n  .last_mes .roleplay_checkbox_item:active {\\n    transform: translateY(0);\\n    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.03);\\n  }\\n\\n  .roleplay_checkbox_item:before {\\n    content: '';\\n    position: absolute;\\n    top: 0;\\n    left: 0;\\n    width: 100%;\\n    height: 3px;\\n    background: linear-gradient(90deg, #ff9aae, #ff6b8b);\\n    transform: scaleX(0);\\n    transform-origin: 0 0;\\n    transition: transform 0.3s ease;\\n  }\\n\\n  .last_mes .roleplay_checkbox_item:hover:before {\\n    transform: scaleX(1);\\n  }\\n\\n  .roleplay_checkbox_title {\\n    font-size: 16px;\\n    font-weight: 600;\\n    color: #333333;\\n    margin-bottom: 8px;\\n    display: block;\\n    letter-spacing: 0.3px;\\n  }\\n\\n  @media (max-width: 768px) {\\n    .roleplay_checkbox_back {\\n      grid-template-columns: 1fr;\\n      padding: 16px;\\n    }\\n    \\n    .roleplay_checkbox_item {\\n      padding: 16px;\\n    }\\n  }\\n\\n  @media (prefers-reduced-motion: reduce) {\\n    .roleplay_checkbox_item, .roleplay_checkbox_item::before, .roleplay_checkbox_item::after, .roleplay_checkbox_content {\\n      transition: none;\\n    }\\n  }\\n</style>\",\"constant\":false,\"selective\":true,\"insertion_order\":100,\"enabled\":false,\"position\":\"before_char\",\"use_regex\":true,\"extensions\":{\"position\":0,\"exclude_recursion\":false,\"display_index\":29,\"probability\":100,\"useProbability\":true,\"depth\":4,\"selectiveLogic\":0,\"group\":\"\",\"group_override\":false,\"group_weight\":100,\"prevent_recursion\":false,\"delay_until_recursion\":false,\"scan_depth\":null,\"match_whole_words\":null,\"use_group_scoring\":false,\"case_sensitive\":null,\"automation_id\":\"\",\"role\":0,\"vectorized\":false,\"sticky\":0,\"cooldown\":0,\"delay\":0}},{\"id\":12,\"keys\":[],\"secondary_keys\":[],\"comment\":\"===样式结束===\",\"content\":\"\",\"constant\":false,\"selective\":true,\"insertion_order\":100,\"enabled\":true,\"position\":\"before_char\",\"use_regex\":true,\"extensions\":{\"position\":0,\"exclude_recursion\":false,\"display_index\":37,\"probability\":100,\"useProbability\":true,\"depth\":4,\"selectiveLogic\":0,\"group\":\"\",\"group_override\":false,\"group_weight\":100,\"prevent_recursion\":false,\"delay_until_recursion\":false,\"scan_depth\":null,\"match_whole_words\":null,\"use_group_scoring\":false,\"case_sensitive\":null,\"automation_id\":\"\",\"role\":0,\"vectorized\":false,\"sticky\":0,\"cooldown\":0,\"delay\":0}},{\"id\":13,\"keys\":[],\"secondary_keys\":[],\"comment\":\"样式-络络扁平化暗色\",\"content\":\"<style>\\n  .roleplay_checkbox_hr {\\n    height: 1px;\\n    background: linear-gradient(to right, rgba(0, 0, 0, 0), rgba(140, 140, 140, 0.25), rgba(0, 0, 0, 0));\\n    border: none;\\n    margin: 10px 0;\\n  }\\n\\n  .roleplay_checkbox_back {\\n    background: linear-gradient(150deg, #262626, #1a1a1a);\\n    border-radius: 16px;\\n    box-shadow: 0 12px 30px rgba(0, 0, 0, 0.18);\\n    padding: 24px;\\n    display: grid;\\n    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));\\n    gap: 16px;\\n    border: 1px solid rgba(255, 255, 255, 0.05);\\n    max-width: 1200px;\\n    margin: 20px auto;\\n  }\\n\\n  .roleplay_checkbox_content {\\n    font-size: 15px;\\n    line-height: 1.5;\\n    color: #b0b0b0;\\n    font-weight: normal;\\n    transition: color 0.3s ease;\\n  }\\n\\n  .roleplay_checkbox_item {\\n    position: relative;\\n    background: #2a2a2a;\\n    border-radius: 12px;\\n    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.12);\\n    padding: 20px 24px;\\n    cursor: default;\\n    border: 1px solid rgba(255, 255, 255, 0.03);\\n    transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);\\n    overflow: hidden;\\n    display: flex;\\n    flex-direction: column;\\n    height: 100%;\\n    z-index: 1;\\n  }\\n\\n  .last_mes .roleplay_checkbox_item {\\n    cursor: pointer;\\n  }\\n\\n  .roleplay_checkbox_item::after {\\n    content: '';\\n    position: absolute;\\n    top: 0;\\n    left: 0;\\n    width: 100%;\\n    height: 100%;\\n    background: linear-gradient(135deg, transparent 0%, transparent 50%, rgba(100, 100, 100, 0.1) 150%);\\n    opacity: 0;\\n    transition: opacity 0.4s ease;\\n    z-index: -1;\\n  }\\n\\n  .last_mes .roleplay_checkbox_item:hover {\\n    transform: translateY(-4px);\\n    box-shadow: 0 10px 20px rgba(0, 0, 0, 0.25);\\n    background: #333333;\\n    border-color: rgba(180, 180, 180, 0.2);\\n  }\\n\\n  .last_mes .roleplay_checkbox_item:hover::after {\\n    opacity: 1;\\n  }\\n\\n  .last_mes .roleplay_checkbox_item:hover .roleplay_checkbox_content {\\n    color: #d8d8d8;\\n  }\\n\\n  .last_mes .roleplay_checkbox_item:active {\\n    transform: translateY(0);\\n    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);\\n  }\\n\\n  .roleplay_checkbox_item:before {\\n    content: '';\\n    position: absolute;\\n    top: 0;\\n    left: 0;\\n    width: 100%;\\n    height: 3px;\\n    background: linear-gradient(90deg, #666666, #999999);\\n    transform: scaleX(0);\\n    transform-origin: 0 0;\\n    transition: transform 0.3s ease;\\n  }\\n\\n  .last_mes .roleplay_checkbox_item:hover:before {\\n    transform: scaleX(1);\\n  }\\n\\n  .roleplay_checkbox_title {\\n    font-size: 16px;\\n    font-weight: 600;\\n    color: #e6e6e6;\\n    margin-bottom: 8px;\\n    display: block;\\n    letter-spacing: 0.3px;\\n  }\\n\\n  @media (max-width: 768px) {\\n    .roleplay_checkbox_back {\\n      grid-template-columns: 1fr;\\n      padding: 16px;\\n    }\\n\\n    .roleplay_checkbox_item {\\n      padding: 16px;\\n    }\\n  }\\n\\n  @media (prefers-reduced-motion: reduce) {\\n\\n    .roleplay_checkbox_item,\\n    .roleplay_checkbox_item::before,\\n    .roleplay_checkbox_item::after,\\n    .roleplay_checkbox_content {\\n      transition: none;\\n    }\\n  }\\n</style>\",\"constant\":false,\"selective\":true,\"insertion_order\":100,\"enabled\":false,\"position\":\"before_char\",\"use_regex\":true,\"extensions\":{\"position\":0,\"exclude_recursion\":false,\"display_index\":32,\"probability\":100,\"useProbability\":true,\"depth\":4,\"selectiveLogic\":0,\"group\":\"\",\"group_override\":false,\"group_weight\":100,\"prevent_recursion\":false,\"delay_until_recursion\":false,\"scan_depth\":null,\"match_whole_words\":null,\"use_group_scoring\":false,\"case_sensitive\":null,\"automation_id\":\"\",\"role\":0,\"vectorized\":false,\"sticky\":0,\"cooldown\":0,\"delay\":0}},{\"id\":14,\"keys\":[],\"secondary_keys\":[],\"comment\":\"样式-络络扁平化暗色（带分割线）\",\"content\":\"<style>\\n  .roleplay_checkbox_hr {\\n    height: 1px;\\n    background: linear-gradient(to right, rgba(0, 0, 0, 0), rgba(140, 140, 140, 0.25), rgba(0, 0, 0, 0));\\n    border: none;\\n    margin: 10px 0;\\n    opacity: 100%;\\n  }\\n\\n  .roleplay_checkbox_back {\\n    background: linear-gradient(150deg, #262626, #1a1a1a);\\n    border-radius: 16px;\\n    box-shadow: 0 12px 30px rgba(0, 0, 0, 0.18);\\n    padding: 24px;\\n    display: grid;\\n    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));\\n    gap: 16px;\\n    border: 1px solid rgba(255, 255, 255, 0.05);\\n    max-width: 1200px;\\n    margin: 20px auto;\\n  }\\n\\n  .roleplay_checkbox_content {\\n    font-size: 15px;\\n    line-height: 1.5;\\n    color: #b0b0b0;\\n    font-weight: normal;\\n    transition: color 0.3s ease;\\n  }\\n\\n  .roleplay_checkbox_item {\\n    position: relative;\\n    background: #2a2a2a;\\n    border-radius: 12px;\\n    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.12);\\n    padding: 20px 24px;\\n    cursor: default;\\n    border: 1px solid rgba(255, 255, 255, 0.03);\\n    transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);\\n    overflow: hidden;\\n    display: flex;\\n    flex-direction: column;\\n    height: 100%;\\n    z-index: 1;\\n  }\\n\\n  .last_mes .roleplay_checkbox_item {\\n    cursor: pointer;\\n  }\\n\\n  .roleplay_checkbox_item::after {\\n    content: '';\\n    position: absolute;\\n    top: 0;\\n    left: 0;\\n    width: 100%;\\n    height: 100%;\\n    background: linear-gradient(135deg, transparent 0%, transparent 50%, rgba(100, 100, 100, 0.1) 150%);\\n    opacity: 0;\\n    transition: opacity 0.4s ease;\\n    z-index: -1;\\n  }\\n\\n  .last_mes .roleplay_checkbox_item:hover {\\n    transform: translateY(-4px);\\n    box-shadow: 0 10px 20px rgba(0, 0, 0, 0.25);\\n    background: #333333;\\n    border-color: rgba(180, 180, 180, 0.2);\\n  }\\n\\n  .last_mes .roleplay_checkbox_item:hover::after {\\n    opacity: 1;\\n  }\\n\\n  .last_mes .roleplay_checkbox_item:hover .roleplay_checkbox_content {\\n    color: #d8d8d8;\\n  }\\n\\n  .last_mes .roleplay_checkbox_item:active {\\n    transform: translateY(0);\\n    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);\\n  }\\n\\n  .roleplay_checkbox_item:before {\\n    content: '';\\n    position: absolute;\\n    top: 0;\\n    left: 0;\\n    width: 100%;\\n    height: 3px;\\n    background: linear-gradient(90deg, #666666, #999999);\\n    transform: scaleX(0);\\n    transform-origin: 0 0;\\n    transition: transform 0.3s ease;\\n  }\\n\\n  .last_mes .roleplay_checkbox_item:hover:before {\\n    transform: scaleX(1);\\n  }\\n\\n  .roleplay_checkbox_title {\\n    font-size: 16px;\\n    font-weight: 600;\\n    color: #e6e6e6;\\n    margin-bottom: 8px;\\n    display: block;\\n    letter-spacing: 0.3px;\\n  }\\n\\n  @media (max-width: 768px) {\\n    .roleplay_checkbox_back {\\n      grid-template-columns: 1fr;\\n      padding: 16px;\\n    }\\n\\n    .roleplay_checkbox_item {\\n      padding: 16px;\\n    }\\n  }\\n\\n  @media (prefers-reduced-motion: reduce) {\\n\\n    .roleplay_checkbox_item,\\n    .roleplay_checkbox_item::before,\\n    .roleplay_checkbox_item::after,\\n    .roleplay_checkbox_content {\\n      transition: none;\\n    }\\n  }\\n</style>\",\"constant\":false,\"selective\":true,\"insertion_order\":100,\"enabled\":false,\"position\":\"before_char\",\"use_regex\":true,\"extensions\":{\"position\":0,\"exclude_recursion\":false,\"display_index\":33,\"probability\":100,\"useProbability\":true,\"depth\":4,\"selectiveLogic\":0,\"group\":\"\",\"group_override\":false,\"group_weight\":100,\"prevent_recursion\":false,\"delay_until_recursion\":false,\"scan_depth\":null,\"match_whole_words\":null,\"use_group_scoring\":false,\"case_sensitive\":null,\"automation_id\":\"\",\"role\":0,\"vectorized\":false,\"sticky\":0,\"cooldown\":0,\"delay\":0}},{\"id\":15,\"keys\":[],\"secondary_keys\":[],\"comment\":\"选项-常识修正\",\"content\":\"{\\n  type: '常识修正',\\n  content: '${给出一个角色按现实逻辑不可能做出的行为，明确指出角色被神秘力量修改常识，类似于被操控或催眠，对其深信不疑，坚信这是正常的$}'\\n},\",\"constant\":true,\"selective\":true,\"insertion_order\":701,\"enabled\":true,\"position\":\"after_char\",\"use_regex\":true,\"extensions\":{\"position\":4,\"exclude_recursion\":true,\"display_index\":18,\"probability\":20,\"useProbability\":true,\"depth\":4,\"selectiveLogic\":0,\"group\":\"\",\"group_override\":false,\"group_weight\":100,\"prevent_recursion\":true,\"delay_until_recursion\":false,\"scan_depth\":null,\"match_whole_words\":null,\"use_group_scoring\":false,\"case_sensitive\":null,\"automation_id\":\"\",\"role\":0,\"vectorized\":false,\"sticky\":0,\"cooldown\":0,\"delay\":0}},{\"id\":16,\"keys\":[],\"secondary_keys\":[],\"comment\":\"选项-欧亨利可能\",\"content\":\"{\\n  type: '欧亨利可能',\\n  content: '${以欧亨利风格给出一个意料之外情理之中的剧情发展，必须出乎意料但合乎逻辑，引导故事走向不同的方向$}'\\n},\",\"constant\":true,\"selective\":true,\"insertion_order\":701,\"enabled\":true,\"position\":\"after_char\",\"use_regex\":true,\"extensions\":{\"position\":4,\"exclude_recursion\":true,\"display_index\":19,\"probability\":40,\"useProbability\":true,\"depth\":4,\"selectiveLogic\":0,\"group\":\"\",\"group_override\":false,\"group_weight\":100,\"prevent_recursion\":true,\"delay_until_recursion\":false,\"scan_depth\":null,\"match_whole_words\":null,\"use_group_scoring\":false,\"case_sensitive\":null,\"automation_id\":\"\",\"role\":0,\"vectorized\":false,\"sticky\":0,\"cooldown\":0,\"delay\":0}},{\"id\":17,\"keys\":[],\"secondary_keys\":[],\"comment\":\"选项-与此同时\",\"content\":\"{\\n  type: '与此同时',\\n  content: '回到上一次回复的剧情开头，于下一个响应从另一个视角重新描述故事情节，${给出一个角色在本次回复开头时的、在目前的剧情中还没有提及的行动$}'\\n},\",\"constant\":true,\"selective\":true,\"insertion_order\":701,\"enabled\":true,\"position\":\"after_char\",\"use_regex\":true,\"extensions\":{\"position\":4,\"exclude_recursion\":true,\"display_index\":20,\"probability\":30,\"useProbability\":true,\"depth\":4,\"selectiveLogic\":0,\"group\":\"\",\"group_override\":false,\"group_weight\":100,\"prevent_recursion\":true,\"delay_until_recursion\":false,\"scan_depth\":null,\"match_whole_words\":null,\"use_group_scoring\":false,\"case_sensitive\":null,\"automation_id\":\"\",\"role\":0,\"vectorized\":false,\"sticky\":0,\"cooldown\":0,\"delay\":0}},{\"id\":18,\"keys\":[],\"secondary_keys\":[],\"comment\":\"选项-社交媒体\",\"content\":\"{\\n  type: '社交媒体',\\n  content: '${随机选择一种社交媒体形式，如新闻报道、贴吧、论坛、直播平台的视角，给出该媒体在此时可能发生的事件，风格可以正经严肃，也可以阴阳怪气，荒诞搞笑，色情淫靡$}'\\n},\",\"constant\":true,\"selective\":true,\"insertion_order\":701,\"enabled\":true,\"position\":\"after_char\",\"use_regex\":true,\"extensions\":{\"position\":4,\"exclude_recursion\":true,\"display_index\":21,\"probability\":30,\"useProbability\":true,\"depth\":4,\"selectiveLogic\":0,\"group\":\"\",\"group_override\":false,\"group_weight\":100,\"prevent_recursion\":true,\"delay_until_recursion\":false,\"scan_depth\":null,\"match_whole_words\":null,\"use_group_scoring\":false,\"case_sensitive\":null,\"automation_id\":\"\",\"role\":0,\"vectorized\":false,\"sticky\":0,\"cooldown\":0,\"delay\":0}},{\"id\":19,\"keys\":[],\"secondary_keys\":[],\"comment\":\"选项-视角切换\",\"content\":\"{\\n  type: '视角切换',\\n  content: '以${与当前剧情末尾不同角色}的视角，${给出一个剧情发展，要求以该角色视角接续下文$}'\\n},\",\"constant\":true,\"selective\":true,\"insertion_order\":701,\"enabled\":true,\"position\":\"after_char\",\"use_regex\":true,\"extensions\":{\"position\":4,\"exclude_recursion\":true,\"display_index\":22,\"probability\":40,\"useProbability\":true,\"depth\":4,\"selectiveLogic\":0,\"group\":\"\",\"group_override\":false,\"group_weight\":100,\"prevent_recursion\":true,\"delay_until_recursion\":false,\"scan_depth\":null,\"match_whole_words\":null,\"use_group_scoring\":false,\"case_sensitive\":null,\"automation_id\":\"\",\"role\":0,\"vectorized\":false,\"sticky\":0,\"cooldown\":0,\"delay\":0}},{\"id\":20,\"keys\":[],\"secondary_keys\":[],\"comment\":\"样式-Noctis酒馆默认主题极简风格\",\"content\":\"<style>\\n  /* 外层容器：采用竖直堆叠的布局，间距较小 */\\n  .roleplay_checkbox_back {\\n    display: flex;\\n    flex-direction: column;\\n    gap: 4px;\\n    padding: 4px;\\n  }\\n\\n  /* 单个选项：结合了 .mes_text/.mes_reasoning 的文字样式 */\\n  .roleplay_checkbox_item {\\n    display: flex;\\n    flex-wrap: wrap;\\n    /* 内容宽度不足时允许换行 */\\n    align-items: center;\\n    padding: 4px 8px;\\n    margin: 2px 0;\\n    background-color: transparent;\\n    /* 背景透明 */\\n    color: #d4d3cc;\\n    font-weight: 500;\\n    /* 参考 .mes_text/.mes_reasoning */\\n    line-height: calc(var(--mainFontSize) + 0.5rem);\\n    max-width: 100%;\\n    overflow-wrap: anywhere;\\n    cursor: default;\\n    font-size: var(--mainFontSize, 16px);\\n    /* 默认字体大小为16px，如无变量则使用16px */\\n  }\\n\\n  .last_mes .roleplay_checkbox_item {\\n    cursor: pointer;\\n  }\\n\\n  /* 鼠标悬停时的效果，可根据需要调整 */\\n  .last_mes .roleplay_checkbox_item:hover {\\n    background-color: rgba(255, 255, 255, 0.1);\\n  }\\n\\n  /* 标题：加粗并与内容保持一定间距 */\\n  .roleplay_checkbox_title {\\n    font-weight: bold;\\n    margin-right: 8px;\\n    white-space: normal;\\n  }\\n\\n  /* 内容：与标题处在同一行，允许换行 */\\n  .roleplay_checkbox_content {\\n    white-space: normal;\\n    flex: 1;\\n  }\\n\\n  /* 隐藏原来的分隔线 */\\n  .roleplay_checkbox_hr {\\n    display: none;\\n  }\\n</style>\",\"constant\":false,\"selective\":true,\"insertion_order\":100,\"enabled\":false,\"position\":\"before_char\",\"use_regex\":true,\"extensions\":{\"position\":0,\"exclude_recursion\":false,\"display_index\":36,\"probability\":100,\"useProbability\":true,\"depth\":4,\"selectiveLogic\":0,\"group\":\"\",\"group_override\":false,\"group_weight\":100,\"prevent_recursion\":false,\"delay_until_recursion\":false,\"scan_depth\":null,\"match_whole_words\":null,\"use_group_scoring\":false,\"case_sensitive\":null,\"automation_id\":\"\",\"role\":0,\"vectorized\":false,\"sticky\":0,\"cooldown\":0,\"delay\":0}},{\"id\":21,\"keys\":[],\"secondary_keys\":[],\"comment\":\"样式-络络扁平化暗色紧凑列表\",\"content\":\"<style>\\n  .roleplay_checkbox_back {\\n    background: linear-gradient(160deg, rgba(45, 45, 45, 0.75), rgba(35, 35, 35, 0.85));\\n    border-radius: 14px;\\n    box-shadow: 0 10px 28px rgba(0, 0, 0, 0.15), 0 3px 10px rgba(0, 0, 0, 0.12);\\n    padding: 16px 18px;\\n    display: flex;\\n    flex-direction: column;\\n    gap: 10px;\\n    border: 1px solid rgba(255, 255, 255, 0.06);\\n    max-width: 100%;\\n    margin: 20px 0;\\n  }\\n\\n  .roleplay_checkbox_item {\\n    position: relative;\\n    background: rgba(50, 50, 50, 0.65);\\n    border-radius: 10px;\\n    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\\n    padding: 14px 16px;\\n    cursor: default;\\n    border: 1px solid rgba(255, 255, 255, 0.04);\\n    transition: all 0.25s cubic-bezier(0.25, 0.8, 0.25, 1);\\n    overflow: hidden;\\n    display: flex;\\n    flex-wrap: wrap;\\n    align-items: flex-start;\\n    z-index: 1;\\n    margin: 2px 0;\\n    color: #d8d8d8;\\n    font-weight: 400;\\n    line-height: 1.5;\\n  }\\n\\n  .last_mes .roleplay_checkbox_item {\\n    cursor: pointer;\\n  }\\n\\n  .roleplay_checkbox_item::after {\\n    content: '';\\n    position: absolute;\\n    top: 0;\\n    left: 0;\\n    width: 100%;\\n    height: 100%;\\n    background: linear-gradient(135deg, rgba(90, 90, 90, 0.06) 0%, transparent 70%);\\n    opacity: 0;\\n    transition: opacity 0.3s ease;\\n    z-index: -1;\\n  }\\n\\n  .last_mes .roleplay_checkbox_item:hover {\\n    transform: translateY(-2px);\\n    box-shadow: 0 6px 16px rgba(0, 0, 0, 0.15);\\n    background: rgba(58, 58, 58, 0.75);\\n    border-color: rgba(200, 200, 200, 0.12);\\n  }\\n\\n  .last_mes .roleplay_checkbox_item:hover::after {\\n    opacity: 1;\\n  }\\n\\n  .last_mes .roleplay_checkbox_item:hover .roleplay_checkbox_content {\\n    color: #e2e2e2;\\n  }\\n\\n  .last_mes .roleplay_checkbox_item:active {\\n    transform: translateY(-1px);\\n    box-shadow: 0 3px 8px rgba(0, 0, 0, 0.12);\\n  }\\n\\n  .roleplay_checkbox_item:before {\\n    content: '';\\n    position: absolute;\\n    top: 0;\\n    left: 0;\\n    width: 3px;\\n    height: 100%;\\n    background: linear-gradient(to bottom, rgba(160, 160, 160, 0.6), rgba(180, 180, 180, 0.3));\\n    transform: scaleY(0);\\n    transform-origin: top;\\n    transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);\\n  }\\n\\n  .last_mes .roleplay_checkbox_item:hover:before {\\n    transform: scaleY(1);\\n  }\\n\\n  .roleplay_checkbox_title {\\n    font-size: 0.94em;\\n    font-weight: 600;\\n    color: #f0f0f0;\\n    padding-right: 12px;\\n    letter-spacing: 0.02em;\\n    text-align: left;\\n    margin-bottom: 4px;\\n  }\\n\\n  /* Long content will trigger this rule */\\n  .roleplay_checkbox_content:not(:empty):not(.short-content)~.roleplay_checkbox_title {\\n    width: 100%;\\n    margin-bottom: 8px;\\n    border-bottom: 1px solid rgba(255, 255, 255, 0.08);\\n    padding-bottom: 6px;\\n  }\\n\\n  .roleplay_checkbox_content {\\n    font-size: 0.94em;\\n    line-height: 1.55;\\n    color: #c6c6c6;\\n    font-weight: normal;\\n    transition: color 0.25s ease;\\n    text-align: left;\\n    flex: 1;\\n    letter-spacing: 0.015em;\\n    overflow-wrap: anywhere;\\n  }\\n\\n  /* JavaScript helper to add this class for single-line content */\\n  .roleplay_checkbox_content.short-content {\\n    flex: 1;\\n  }\\n\\n  .roleplay_checkbox_hr {\\n    display: none;\\n  }\\n\\n  @media (max-width: 768px) {\\n    .roleplay_checkbox_back {\\n      padding: 14px;\\n      gap: 8px;\\n    }\\n\\n    .roleplay_checkbox_item {\\n      padding: 12px 14px;\\n    }\\n\\n    .roleplay_checkbox_title {\\n      font-size: 0.9em;\\n      padding-right: 10px;\\n    }\\n\\n    .roleplay_checkbox_content {\\n      font-size: 0.9em;\\n      line-height: 1.5;\\n    }\\n  }\\n\\n  @media (prefers-reduced-motion: reduce) {\\n\\n    .roleplay_checkbox_item,\\n    .roleplay_checkbox_item::before,\\n    .roleplay_checkbox_item::after,\\n    .roleplay_checkbox_content,\\n    .roleplay_checkbox_title {\\n      transition: none;\\n    }\\n  }\\n</style>\",\"constant\":false,\"selective\":true,\"insertion_order\":100,\"enabled\":false,\"position\":\"before_char\",\"use_regex\":true,\"extensions\":{\"position\":0,\"exclude_recursion\":false,\"display_index\":35,\"probability\":100,\"useProbability\":true,\"depth\":4,\"selectiveLogic\":0,\"group\":\"\",\"group_override\":false,\"group_weight\":100,\"prevent_recursion\":false,\"delay_until_recursion\":false,\"scan_depth\":null,\"match_whole_words\":null,\"use_group_scoring\":false,\"case_sensitive\":null,\"automation_id\":\"\",\"role\":0,\"vectorized\":false,\"sticky\":0,\"cooldown\":0,\"delay\":0}},{\"id\":22,\"keys\":[],\"secondary_keys\":[],\"comment\":\"样式-络络扁平化暗色改\",\"content\":\"<style>\\n  .roleplay_checkbox_back {\\n    background: linear-gradient(165deg, rgba(45, 45, 45, 0.75), rgba(32, 32, 32, 0.85));\\n    border-radius: 16px;\\n    box-shadow: 0 12px 32px rgba(0, 0, 0, 0.16), 0 4px 12px rgba(0, 0, 0, 0.12);\\n    padding: 22px 24px;\\n    display: grid;\\n    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));\\n    gap: 16px;\\n    border: 1px solid rgba(255, 255, 255, 0.07);\\n    max-width: 100%;\\n    margin: 24px 0;\\n  }\\n\\n  .roleplay_checkbox_item {\\n    position: relative;\\n    background: rgba(50, 50, 50, 0.65);\\n    border-radius: 12px;\\n    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.12);\\n    padding: 18px 20px;\\n    cursor: default;\\n    border: 1px solid rgba(255, 255, 255, 0.04);\\n    transition: all 0.28s cubic-bezier(0.22, 1, 0.36, 1);\\n    overflow: hidden;\\n    display: flex;\\n    flex-direction: column;\\n    z-index: 1;\\n    margin: 0;\\n    color: #d8d8d8;\\n    font-weight: 400;\\n    line-height: 1.6;\\n    height: 100%;\\n  }\\n\\n  .last_mes .roleplay_checkbox_item {\\n    cursor: pointer;\\n  }\\n\\n  .roleplay_checkbox_item::after {\\n    content: '';\\n    position: absolute;\\n    top: 0;\\n    left: 0;\\n    width: 100%;\\n    height: 100%;\\n    background: linear-gradient(140deg, rgba(90, 90, 90, 0.06) 0%, transparent 75%);\\n    opacity: 0;\\n    transition: opacity 0.35s ease;\\n    z-index: -1;\\n  }\\n\\n  .last_mes .roleplay_checkbox_item:hover {\\n    transform: translateY(-4px);\\n    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.18);\\n    background: rgba(58, 58, 58, 0.75);\\n    border-color: rgba(200, 200, 200, 0.15);\\n  }\\n\\n  .last_mes .roleplay_checkbox_item:hover::after {\\n    opacity: 1;\\n  }\\n\\n  .last_mes .roleplay_checkbox_item:hover .roleplay_checkbox_content {\\n    color: #e5e5e5;\\n  }\\n\\n  .last_mes .roleplay_checkbox_item:active {\\n    transform: translateY(-2px);\\n    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\\n  }\\n\\n  .roleplay_checkbox_item:before {\\n    content: '';\\n    position: absolute;\\n    top: 0;\\n    left: 0;\\n    width: 100%;\\n    height: 3px;\\n    background: linear-gradient(90deg, rgba(160, 160, 160, 0.7), rgba(200, 200, 200, 0.4));\\n    transform: scaleX(0);\\n    transform-origin: 0 0;\\n    transition: transform 0.35s cubic-bezier(0.4, 0, 0.2, 1);\\n  }\\n\\n  .last_mes .roleplay_checkbox_item:hover:before {\\n    transform: scaleX(1);\\n  }\\n\\n  .roleplay_checkbox_title {\\n    font-size: 0.95em;\\n    font-weight: 600;\\n    color: #f7f7f7;\\n    margin-bottom: 12px;\\n    letter-spacing: 0.04em;\\n    text-align: left;\\n    padding-bottom: 10px;\\n    border-bottom: 1px solid rgba(255, 255, 255, 0.1);\\n    text-shadow: 0 1px 1px rgba(0, 0, 0, 0.15);\\n    line-height: 1.4;\\n    position: relative;\\n    display: flex;\\n    align-items: center;\\n  }\\n\\n  .roleplay_checkbox_title::before {\\n    content: '';\\n    display: inline-block;\\n    width: 6px;\\n    height: 6px;\\n    background: rgba(200, 200, 200, 0.7);\\n    border-radius: 50%;\\n    margin-right: 10px;\\n    box-shadow: 0 0 0 2px rgba(200, 200, 200, 0.15);\\n  }\\n\\n  .roleplay_checkbox_content {\\n    font-size: 0.95em;\\n    line-height: 1.65;\\n    color: #bebebe;\\n    font-weight: normal;\\n    transition: color 0.25s ease;\\n    text-align: left;\\n    flex: 1;\\n    text-shadow: 0 1px 1px rgba(0, 0, 0, 0.08);\\n    letter-spacing: 0.018em;\\n  }\\n\\n  .roleplay_checkbox_hr {\\n    display: none;\\n  }\\n\\n  /* Special state for selected items */\\n  .roleplay_checkbox_item.selected {\\n    background: rgba(65, 85, 95, 0.7);\\n    border-color: rgba(130, 170, 200, 0.3);\\n  }\\n\\n  .roleplay_checkbox_item.selected:before {\\n    background: linear-gradient(90deg, rgba(130, 180, 210, 0.8), rgba(150, 200, 230, 0.4));\\n    transform: scaleX(1);\\n  }\\n\\n  .roleplay_checkbox_item.selected .roleplay_checkbox_title::before {\\n    background: rgba(130, 180, 210, 0.9);\\n    box-shadow: 0 0 0 2px rgba(130, 180, 210, 0.2);\\n  }\\n\\n  @media (max-width: 768px) {\\n    .roleplay_checkbox_back {\\n      padding: 18px;\\n      gap: 14px;\\n      grid-template-columns: 1fr;\\n    }\\n\\n    .roleplay_checkbox_item {\\n      padding: 16px;\\n    }\\n\\n    .roleplay_checkbox_title {\\n      font-size: 0.9em;\\n      padding-bottom: 8px;\\n      margin-bottom: 10px;\\n    }\\n\\n    .roleplay_checkbox_content {\\n      font-size: 0.92em;\\n      line-height: 1.6;\\n    }\\n  }\\n\\n  @media (prefers-reduced-motion: reduce) {\\n\\n    .roleplay_checkbox_item,\\n    .roleplay_checkbox_item::before,\\n    .roleplay_checkbox_item::after,\\n    .roleplay_checkbox_content,\\n    .roleplay_checkbox_title {\\n      transition: none;\\n    }\\n  }\\n</style>\",\"constant\":false,\"selective\":true,\"insertion_order\":100,\"enabled\":true,\"position\":\"before_char\",\"use_regex\":true,\"extensions\":{\"position\":0,\"exclude_recursion\":false,\"display_index\":34,\"probability\":100,\"useProbability\":true,\"depth\":4,\"selectiveLogic\":0,\"group\":\"\",\"group_override\":false,\"group_weight\":100,\"prevent_recursion\":false,\"delay_until_recursion\":false,\"scan_depth\":null,\"match_whole_words\":null,\"use_group_scoring\":false,\"case_sensitive\":null,\"automation_id\":\"\",\"role\":0,\"vectorized\":false,\"sticky\":0,\"cooldown\":0,\"delay\":0}},{\"id\":23,\"keys\":[],\"secondary_keys\":[],\"comment\":\"样式-络络扁平化亮色改_海海改\",\"content\":\"<style>\\n  .roleplay_checkbox_back {\\n    background: linear-gradient(165deg, #f7f7f7, #f0f0f0);\\n    border-radius: 16px;\\n    box-shadow: 0 12px 32px rgba(0, 0, 0, 0.05), 0 4px 12px rgba(0, 0, 0, 0.03);\\n    padding: 22px 24px;\\n    display: grid;\\n    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));\\n    gap: 16px;\\n    border: 1px solid rgba(0, 0, 0, 0.03);\\n    max-width: 100%;\\n    margin: 24px 0;\\n  }\\n  \\n  .roleplay_checkbox_item {\\n    position: relative;\\n    background: #fcfcfc;\\n    border-radius: 12px;\\n    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.04);\\n    padding: 18px 20px;\\n    cursor: default;\\n    border: 1px solid rgba(0, 0, 0, 0.05);\\n    transition: all 0.28s cubic-bezier(0.22, 1, 0.36, 1);\\n    overflow: hidden;\\n    display: flex;\\n    flex-direction: column;\\n    z-index: 1;\\n    margin: 0;\\n    color: #333;\\n    font-weight: 400;\\n    line-height: 1.6;\\n    height: 100%;\\n  }\\n\\n  .last_mes .roleplay_checkbox_item {\\n    cursor: pointer;\\n  }\\n  \\n  .last_mes .roleplay_checkbox_item::after {\\n    content: '';\\n    position: absolute;\\n    top: 0;\\n    left: 0;\\n    width: 100%;\\n    height: 100%;\\n    background: linear-gradient(140deg, transparent 0%, transparent 50%, rgba(255, 182, 193, 0.1) 150%);\\n    opacity: 0;\\n    transition: opacity 0.35s ease;\\n    z-index: -1;\\n  }\\n  \\n  .last_mes .roleplay_checkbox_item:hover {\\n    transform: translateY(-4px);\\n    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.07);\\n    background: #ffffff;\\n    border-color: rgba(255, 105, 180, 0.15);\\n  }\\n  \\n  .last_mes .roleplay_checkbox_item:hover::after {\\n    opacity: 1;\\n  }\\n  \\n  .last_mes .roleplay_checkbox_item:hover .roleplay_checkbox_content {\\n    color: #444444;\\n  }\\n  \\n  .last_mes .roleplay_checkbox_item:active {\\n    transform: translateY(-2px);\\n    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.03);\\n  }\\n  \\n  .roleplay_checkbox_item:before {\\n    content: '';\\n    position: absolute;\\n    top: 0;\\n    left: 0;\\n    width: 100%;\\n    height: 3px;\\n    background: linear-gradient(90deg, #ff9aae, #ff6b8b);\\n    transform: scaleX(0);\\n    transform-origin: 0 0;\\n    transition: transform 0.35s cubic-bezier(0.4, 0, 0.2, 1);\\n  }\\n  \\n  .last_mes .roleplay_checkbox_item:hover:before {\\n    transform: scaleX(1);\\n  }\\n  \\n  .roleplay_checkbox_title {\\n    font-size: 0.95em;\\n    font-weight: 600;\\n    color: #333333;\\n    margin-bottom: 12px;\\n    letter-spacing: 0.04em;\\n    text-align: left;\\n    padding-bottom: 10px;\\n    border-bottom: 1px solid rgba(200, 200, 200, 0.3);\\n    text-shadow: 0 1px 1px rgba(0, 0, 0, 0.08);\\n    line-height: 1.4;\\n    position: relative;\\n    display: flex;\\n    align-items: center;\\n  }\\n  \\n  .roleplay_checkbox_title::before {\\n    content: '';\\n    display: inline-block;\\n    width: 6px;\\n    height: 6px;\\n    background: #ff9aae;\\n    border-radius: 50%;\\n    margin-right: 10px;\\n    box-shadow: 0 0 0 2px rgba(255, 105, 180, 0.2);\\n  }\\n  \\n  .roleplay_checkbox_content {\\n    font-size: 0.95em;\\n    line-height: 1.65;\\n    color: #666666;\\n    font-weight: normal;\\n    transition: color 0.25s ease;\\n    text-align: left;\\n    flex: 1;\\n    text-shadow: 0 1px 1px rgba(0, 0, 0, 0.08);\\n    letter-spacing: 0.018em;\\n  }\\n  \\n  .roleplay_checkbox_hr {\\n    display: none;\\n  }\\n  \\n  /* Special state for selected items */\\n  .roleplay_checkbox_item.selected {\\n    background: rgba(255, 240, 245, 0.7);\\n    border-color: rgba(255, 182, 193, 0.5);\\n  }\\n  \\n  .roleplay_checkbox_item.selected:before {\\n    background: linear-gradient(90deg, #ffb6c1, #ff9aae);\\n    transform: scaleX(1);\\n  }\\n  \\n  .roleplay_checkbox_item.selected .roleplay_checkbox_title::before {\\n    background: #ffb6c1;\\n    box-shadow: 0 0 0 2px rgba(255, 182, 193, 0.3);\\n  }\\n  \\n  @media (max-width: 768px) {\\n    .roleplay_checkbox_back {\\n      padding: 18px;\\n      gap: 14px;\\n      grid-template-columns: 1fr;\\n    }\\n    \\n    .roleplay_checkbox_item {\\n      padding: 16px;\\n    }\\n    \\n    .roleplay_checkbox_title {\\n      font-size: 0.9em;\\n      padding-bottom: 8px;\\n      margin-bottom: 10px;\\n    }\\n    \\n    .roleplay_checkbox_content {\\n      font-size: 0.92em;\\n      line-height: 1.6;\\n    }\\n  }\\n  \\n  @media (prefers-reduced-motion: reduce) {\\n    .roleplay_checkbox_item, .roleplay_checkbox_item::before, .roleplay_checkbox_item::after, \\n    .roleplay_checkbox_content, .roleplay_checkbox_title {\\n      transition: none;\\n    }\\n  }\\n</style>\",\"constant\":false,\"selective\":true,\"insertion_order\":100,\"enabled\":false,\"position\":\"before_char\",\"use_regex\":true,\"extensions\":{\"position\":0,\"exclude_recursion\":false,\"display_index\":30,\"probability\":100,\"useProbability\":true,\"depth\":4,\"selectiveLogic\":0,\"group\":\"\",\"group_override\":false,\"group_weight\":100,\"prevent_recursion\":false,\"delay_until_recursion\":false,\"scan_depth\":null,\"match_whole_words\":null,\"use_group_scoring\":false,\"case_sensitive\":null,\"automation_id\":\"\",\"role\":0,\"vectorized\":false,\"sticky\":0,\"cooldown\":0,\"delay\":0}},{\"id\":24,\"keys\":[],\"secondary_keys\":[],\"comment\":\"样式-络络扁平化亮色紧凑列表_海海改\",\"content\":\"<style>\\n  .roleplay_checkbox_back {\\n    background: linear-gradient(150deg, #f7f7f7, #f0f0f0);\\n    border-radius: 14px;\\n    box-shadow: 0 10px 28px rgba(0, 0, 0, 0.05), 0 3px 10px rgba(0, 0, 0, 0.03);\\n    padding: 16px 18px;\\n    display: flex;\\n    flex-direction: column;\\n    gap: 10px;\\n    border: 1px solid rgba(0, 0, 0, 0.03);\\n    max-width: 100%;\\n    margin: 20px 0;\\n  }\\n\\n  .roleplay_checkbox_item {\\n    position: relative;\\n    background: #fcfcfc;\\n    border-radius: 10px;\\n    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.04);\\n    padding: 14px 16px;\\n    cursor: default;\\n    border: 1px solid rgba(0, 0, 0, 0.05);\\n    transition: all 0.25s cubic-bezier(0.25, 0.8, 0.25, 1);\\n    overflow: hidden;\\n    display: flex;\\n    flex-wrap: wrap;\\n    align-items: flex-start;\\n    z-index: 1;\\n    margin: 2px 0;\\n    color: #333;\\n    font-weight: 400;\\n    line-height: 1.5;\\n  }\\n\\n  .last_mes .roleplay_checkbox_item {\\n    cursor: pointer;\\n  }\\n\\n  .roleplay_checkbox_item::after {\\n    content: '';\\n    position: absolute;\\n    top: 0;\\n    left: 0;\\n    width: 100%;\\n    height: 100%;\\n    background: linear-gradient(135deg, transparent 0%, transparent 50%, rgba(255, 182, 193, 0.1) 150%);\\n    opacity: 0;\\n    transition: opacity 0.3s ease;\\n    z-index: -1;\\n  }\\n\\n  .last_mes .roleplay_checkbox_item:hover {\\n    transform: translateY(-2px);\\n    box-shadow: 0 6px 16px rgba(0, 0, 0, 0.07);\\n    background: #ffffff;\\n    border-color: rgba(255, 105, 180, 0.15);\\n  }\\n\\n  .last_mes .roleplay_checkbox_item:hover::after {\\n    opacity: 1;\\n  }\\n\\n  .last_mes .roleplay_checkbox_item:hover .roleplay_checkbox_content {\\n    color: #444444;\\n  }\\n\\n  .last_mes .roleplay_checkbox_item:active {\\n    transform: translateY(-1px);\\n    box-shadow: 0 3px 8px rgba(0, 0, 0, 0.03);\\n  }\\n\\n  .roleplay_checkbox_item:before {\\n    content: '';\\n    position: absolute;\\n    top: 0;\\n    left: 0;\\n    width: 3px;\\n    height: 100%;\\n    background: linear-gradient(to bottom, #ff9aae, #ff6b8b);\\n    transform: scaleY(0);\\n    transform-origin: top;\\n    transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);\\n  }\\n\\n  .last_mes .roleplay_checkbox_item:hover:before {\\n    transform: scaleY(1);\\n  }\\n\\n  .roleplay_checkbox_title {\\n    font-size: 0.94em;\\n    font-weight: 600;\\n    color: #333333;\\n    padding-right: 12px;\\n    letter-spacing: 0.02em;\\n    text-align: left;\\n    margin-bottom: 4px;\\n  }\\n\\n  .roleplay_checkbox_content:not(:empty):not(.short-content)~.roleplay_checkbox_title {\\n    width: 100%;\\n    margin-bottom: 8px;\\n    border-bottom: 1px solid rgba(200, 200, 200, 0.3);\\n    padding-bottom: 6px;\\n  }\\n\\n  .roleplay_checkbox_content {\\n    font-size: 0.94em;\\n    line-height: 1.55;\\n    color: #666666;\\n    font-weight: normal;\\n    transition: color 0.25s ease;\\n    text-align: left;\\n    flex: 1;\\n    letter-spacing: 0.015em;\\n    overflow-wrap: anywhere;\\n  }\\n\\n  .roleplay_checkbox_content.short-content {\\n    flex: 1;\\n  }\\n\\n  .roleplay_checkbox_hr {\\n    display: none;\\n  }\\n\\n  @media (max-width: 768px) {\\n    .roleplay_checkbox_back {\\n      padding: 14px;\\n      gap: 8px;\\n    }\\n\\n    .roleplay_checkbox_item {\\n      padding: 12px 14px;\\n    }\\n\\n    .roleplay_checkbox_title {\\n      font-size: 0.9em;\\n      padding-right: 10px;\\n    }\\n\\n    .roleplay_checkbox_content {\\n      font-size: 0.9em;\\n      line-height: 1.5;\\n    }\\n  }\\n\\n  @media (prefers-reduced-motion: reduce) {\\n\\n    .roleplay_checkbox_item,\\n    .roleplay_checkbox_item::before,\\n    .roleplay_checkbox_item::after,\\n    .roleplay_checkbox_content,\\n    .roleplay_checkbox_title {\\n      transition: none;\\n    }\\n  }\\n</style>\",\"constant\":false,\"selective\":true,\"insertion_order\":100,\"enabled\":false,\"position\":\"before_char\",\"use_regex\":true,\"extensions\":{\"position\":0,\"exclude_recursion\":false,\"display_index\":31,\"probability\":100,\"useProbability\":true,\"depth\":4,\"selectiveLogic\":0,\"group\":\"\",\"group_override\":false,\"group_weight\":100,\"prevent_recursion\":false,\"delay_until_recursion\":false,\"scan_depth\":null,\"match_whole_words\":null,\"use_group_scoring\":false,\"case_sensitive\":null,\"automation_id\":\"\",\"role\":0,\"vectorized\":false,\"sticky\":0,\"cooldown\":0,\"delay\":0}},{\"id\":25,\"keys\":[],\"secondary_keys\":[],\"comment\":\"===设置开始===\",\"content\":\"\",\"constant\":false,\"selective\":true,\"insertion_order\":100,\"enabled\":true,\"position\":\"before_char\",\"use_regex\":true,\"extensions\":{\"position\":0,\"exclude_recursion\":false,\"display_index\":24,\"probability\":100,\"useProbability\":true,\"depth\":4,\"selectiveLogic\":0,\"group\":\"\",\"group_override\":false,\"group_weight\":100,\"prevent_recursion\":false,\"delay_until_recursion\":false,\"scan_depth\":null,\"match_whole_words\":null,\"use_group_scoring\":false,\"case_sensitive\":null,\"automation_id\":\"\",\"role\":0,\"vectorized\":false,\"sticky\":0,\"cooldown\":0,\"delay\":0}},{\"id\":26,\"keys\":[],\"secondary_keys\":[],\"comment\":\"===设置结束===\",\"content\":\"\",\"constant\":false,\"selective\":true,\"insertion_order\":100,\"enabled\":true,\"position\":\"before_char\",\"use_regex\":true,\"extensions\":{\"position\":0,\"exclude_recursion\":false,\"display_index\":26,\"probability\":100,\"useProbability\":true,\"depth\":4,\"selectiveLogic\":0,\"group\":\"\",\"group_override\":false,\"group_weight\":100,\"prevent_recursion\":false,\"delay_until_recursion\":false,\"scan_depth\":null,\"match_whole_words\":null,\"use_group_scoring\":false,\"case_sensitive\":null,\"automation_id\":\"\",\"role\":0,\"vectorized\":false,\"sticky\":0,\"cooldown\":0,\"delay\":0}},{\"id\":27,\"keys\":[],\"secondary_keys\":[],\"comment\":\"设置-开启则直接发送，关闭则填在输入\",\"content\":\"\",\"constant\":false,\"selective\":true,\"insertion_order\":100,\"enabled\":false,\"position\":\"before_char\",\"use_regex\":true,\"extensions\":{\"position\":0,\"exclude_recursion\":false,\"display_index\":25,\"probability\":100,\"useProbability\":true,\"depth\":4,\"selectiveLogic\":0,\"group\":\"\",\"group_override\":false,\"group_weight\":100,\"prevent_recursion\":false,\"delay_until_recursion\":false,\"scan_depth\":null,\"match_whole_words\":null,\"use_group_scoring\":false,\"case_sensitive\":null,\"automation_id\":\"\",\"role\":0,\"vectorized\":false,\"sticky\":0,\"cooldown\":0,\"delay\":0}},{\"id\":28,\"keys\":[],\"secondary_keys\":[],\"comment\":\"邪恶指引-打破第四面墙版\",\"content\":\"{邪恶指引: {rule: Insert the EvilGuidance after your response as the following format, format: \\\"<EvilGuidance>\\\\n<small>\\\\n```yaml\\\\n😈邪恶指引: ${以旁白的角度，打破第四堵墙用调侃戏谑而亲密的语气给进行本次AI聊天的人提供不具有参考价值的建议，字数不超过150字。尽可能荒谬幽默，比较变态，可以色情，但绝不会说角色和非<user>的男性发生性行为。适当使用{{random::emoji::颜文字}}使话语显得更加活泼$}\\\\n```\\\\n</small>\\\\n</EvilGuidance>\\\"}}\\n\",\"constant\":true,\"selective\":true,\"insertion_order\":699,\"enabled\":false,\"position\":\"after_char\",\"use_regex\":true,\"extensions\":{\"position\":4,\"exclude_recursion\":true,\"display_index\":13,\"probability\":100,\"useProbability\":true,\"depth\":4,\"selectiveLogic\":0,\"group\":\"\",\"group_override\":false,\"group_weight\":100,\"prevent_recursion\":true,\"delay_until_recursion\":false,\"scan_depth\":null,\"match_whole_words\":null,\"use_group_scoring\":false,\"case_sensitive\":null,\"automation_id\":\"\",\"role\":0,\"vectorized\":false,\"sticky\":0,\"cooldown\":0,\"delay\":0}},{\"id\":29,\"keys\":[],\"secondary_keys\":[],\"comment\":\"选项-利用场景\",\"content\":\"{\\n  type: '利用场景',\\n  content: '${结合场景和角色当前信息，给出一个角色利用场景的物理特性或氛围进行的互动的剧情发展$},'\\n  exampe: [环境互动, 物品利用, 隐蔽行为, '...']\\n}\",\"constant\":true,\"selective\":true,\"insertion_order\":701,\"enabled\":true,\"position\":\"after_char\",\"use_regex\":true,\"extensions\":{\"position\":4,\"exclude_recursion\":true,\"display_index\":22,\"probability\":30,\"useProbability\":true,\"depth\":4,\"selectiveLogic\":0,\"group\":\"\",\"group_override\":false,\"group_weight\":100,\"prevent_recursion\":true,\"delay_until_recursion\":false,\"scan_depth\":null,\"match_whole_words\":null,\"use_group_scoring\":false,\"case_sensitive\":null,\"automation_id\":\"\",\"role\":0,\"vectorized\":false,\"sticky\":0,\"cooldown\":0,\"delay\":0}}],\"name\":\"【选择框】\"}},\"create_date\":\"2025-3-9 @07h 27m 24s 222ms\"}"}